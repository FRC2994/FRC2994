<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>WPILIB: Counter.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>Counter.cpp</h1><a href="Counter_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*----------------------------------------------------------------------------*/</span>
<a name="l00002"></a>00002 <span class="comment">/* Copyright (c) FIRST 2008. All Rights Reserved.                             */</span>
<a name="l00003"></a>00003 <span class="comment">/* Open Source Software - may be modified and shared by FRC teams. The code   */</span>
<a name="l00004"></a>00004 <span class="comment">/* must be accompanied by the FIRST BSD license file in $(WIND_BASE)/WPILib.  */</span>
<a name="l00005"></a>00005 <span class="comment">/*----------------------------------------------------------------------------*/</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#include "<a class="code" href="Counter_8h.html">Counter.h</a>"</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include "<a class="code" href="AnalogTrigger_8h.html">AnalogTrigger.h</a>"</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include "<a class="code" href="DigitalInput_8h.html">DigitalInput.h</a>"</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include "<a class="code" href="Resource_8h.html">Resource.h</a>"</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include "<a class="code" href="Utility_8h.html">Utility.h</a>"</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include "<a class="code" href="WPIStatus_8h.html">WPIStatus.h</a>"</span>
<a name="l00013"></a>00013 
<a name="l00014"></a><a class="code" href="Counter_8cpp.html#e1cba8974e7b9ae5342dcc7392c18512">00014</a> <span class="keyword">static</span> <a class="code" href="classResource.html">Resource</a> *<a class="code" href="Counter_8cpp.html#e1cba8974e7b9ae5342dcc7392c18512">counters</a> = <a class="code" href="nivision_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00015"></a>00015 
<a name="l00020"></a><a class="code" href="classCounter.html#b5a9481f8b36a832cb61d07617648061">00020</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#b5a9481f8b36a832cb61d07617648061">Counter::InitCounter</a>(<a class="code" href="classCounter.html#843bf430e8d2828c39f8bd2b7cf382f6">Mode</a> mode)
<a name="l00021"></a>00021 {
<a name="l00022"></a>00022     <a class="code" href="classResource.html#de155b92abe4ff2b0c43576434033922">Resource::CreateResourceObject</a>(&amp;counters, tCounter::kNumSystems);
<a name="l00023"></a>00023     <a class="code" href="classCounter.html#89138c5cda2c8745508e757ed7f3d322" title="The index of this counter.">m_index</a> = counters-&gt;<a class="code" href="classResource.html#e3a993c7a656e97b51c77b1f7698ef3c">Allocate</a>();
<a name="l00024"></a>00024     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a> = <span class="keyword">new</span> tCounter(<a class="code" href="classCounter.html#89138c5cda2c8745508e757ed7f3d322" title="The index of this counter.">m_index</a>, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00025"></a>00025     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_Mode(mode, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00026"></a>00026     <a class="code" href="classCounter.html#2df9bd57f9087245937f592f0ce94411" title="What makes the counter count up.">m_upSource</a> = <a class="code" href="nivision_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00027"></a>00027     <a class="code" href="classCounter.html#335589e09e0a49039c7119bbaff8ab15" title="What makes the counter count down.">m_downSource</a> = <a class="code" href="nivision_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00028"></a>00028     <a class="code" href="classCounter.html#48b6c6ca34e369afb3e71d46e4c8763f" title="Was the upSource allocated locally?">m_allocatedUpSource</a> = <span class="keyword">false</span>;
<a name="l00029"></a>00029     <a class="code" href="classCounter.html#5521efc14f1bf070500b96e94aac157b" title="Was the downSource allocated locally?">m_allocatedDownSource</a> = <span class="keyword">false</span>;
<a name="l00030"></a>00030     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeTimerConfig_AverageSize(1, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00031"></a>00031 }
<a name="l00032"></a>00032 
<a name="l00038"></a><a class="code" href="classCounter.html#1e05f69b5240fbab3e7ab351672167f0">00038</a> <a class="code" href="classCounter.html#1e05f69b5240fbab3e7ab351672167f0">Counter::Counter</a>()
<a name="l00039"></a>00039 {
<a name="l00040"></a>00040     <a class="code" href="classCounter.html#b5a9481f8b36a832cb61d07617648061">InitCounter</a>();
<a name="l00041"></a>00041 }
<a name="l00042"></a>00042 
<a name="l00048"></a><a class="code" href="classCounter.html#9c7d57696e482eff75e1e03eaf6f8120">00048</a> <a class="code" href="classCounter.html#1e05f69b5240fbab3e7ab351672167f0">Counter::Counter</a>(<a class="code" href="classDigitalSource.html">DigitalSource</a> *source)
<a name="l00049"></a>00049 {
<a name="l00050"></a>00050     <a class="code" href="classCounter.html#b5a9481f8b36a832cb61d07617648061">InitCounter</a>();
<a name="l00051"></a>00051     <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">SetUpSource</a>(source);
<a name="l00052"></a>00052     <a class="code" href="classCounter.html#14f57c89d5e20d5ca590877dcc6be50f">ClearDownSource</a>();
<a name="l00053"></a>00053 }
<a name="l00054"></a>00054 
<a name="l00055"></a><a class="code" href="classCounter.html#21f3bf6b6692bff6906c59a00b31ee54">00055</a> <a class="code" href="classCounter.html#1e05f69b5240fbab3e7ab351672167f0">Counter::Counter</a>(<a class="code" href="classDigitalSource.html">DigitalSource</a> &amp;source)
<a name="l00056"></a>00056 {
<a name="l00057"></a>00057     <a class="code" href="classCounter.html#b5a9481f8b36a832cb61d07617648061">InitCounter</a>();
<a name="l00058"></a>00058     <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">SetUpSource</a>(&amp;source);
<a name="l00059"></a>00059     <a class="code" href="classCounter.html#14f57c89d5e20d5ca590877dcc6be50f">ClearDownSource</a>();
<a name="l00060"></a>00060 }
<a name="l00061"></a>00061 
<a name="l00066"></a><a class="code" href="classCounter.html#133b5a4e1dba8d8260000e25a9a4d124">00066</a> <a class="code" href="classCounter.html#1e05f69b5240fbab3e7ab351672167f0">Counter::Counter</a>(UINT32 channel)
<a name="l00067"></a>00067 {
<a name="l00068"></a>00068     <a class="code" href="classCounter.html#b5a9481f8b36a832cb61d07617648061">InitCounter</a>();
<a name="l00069"></a>00069     <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">SetUpSource</a>(channel);
<a name="l00070"></a>00070     <a class="code" href="classCounter.html#14f57c89d5e20d5ca590877dcc6be50f">ClearDownSource</a>();
<a name="l00071"></a>00071 }
<a name="l00072"></a>00072 
<a name="l00079"></a><a class="code" href="classCounter.html#bbcae190800d57671a56f1cd8ddb85df">00079</a> <a class="code" href="classCounter.html#1e05f69b5240fbab3e7ab351672167f0">Counter::Counter</a>(UINT32 slot, UINT32 channel)
<a name="l00080"></a>00080 {
<a name="l00081"></a>00081     <a class="code" href="classCounter.html#b5a9481f8b36a832cb61d07617648061">InitCounter</a>();
<a name="l00082"></a>00082     <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">SetUpSource</a>(slot, channel);
<a name="l00083"></a>00083     <a class="code" href="classCounter.html#14f57c89d5e20d5ca590877dcc6be50f">ClearDownSource</a>();
<a name="l00084"></a>00084 }
<a name="l00085"></a>00085 
<a name="l00091"></a><a class="code" href="classCounter.html#51efc97323b6d5c42de11fa827655118">00091</a> <a class="code" href="classCounter.html#1e05f69b5240fbab3e7ab351672167f0">Counter::Counter</a>(<a class="code" href="classAnalogTrigger.html">AnalogTrigger</a> *trigger)
<a name="l00092"></a>00092 {
<a name="l00093"></a>00093     <a class="code" href="classCounter.html#b5a9481f8b36a832cb61d07617648061">InitCounter</a>();
<a name="l00094"></a>00094     <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">SetUpSource</a>(trigger-&gt;<a class="code" href="classAnalogTrigger.html#9873edc2ccb82375c63f69b4355de52d">CreateOutput</a>(<a class="code" href="classAnalogTriggerOutput.html#57642fbb2f393b4bb2f08bdbc12bea188c3936049a0290f5a3df3de94412841f">AnalogTriggerOutput::kState</a>));
<a name="l00095"></a>00095     <a class="code" href="classCounter.html#14f57c89d5e20d5ca590877dcc6be50f">ClearDownSource</a>();
<a name="l00096"></a>00096     <a class="code" href="classCounter.html#48b6c6ca34e369afb3e71d46e4c8763f" title="Was the upSource allocated locally?">m_allocatedUpSource</a> = <span class="keyword">true</span>;
<a name="l00097"></a>00097 }
<a name="l00098"></a>00098 
<a name="l00099"></a><a class="code" href="classCounter.html#7f3b71a90529ee3dffa442f113c4ad3f">00099</a> <a class="code" href="classCounter.html#1e05f69b5240fbab3e7ab351672167f0">Counter::Counter</a>(<a class="code" href="classAnalogTrigger.html">AnalogTrigger</a> &amp;trigger)
<a name="l00100"></a>00100 {
<a name="l00101"></a>00101     <a class="code" href="classCounter.html#b5a9481f8b36a832cb61d07617648061">InitCounter</a>();
<a name="l00102"></a>00102     <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">SetUpSource</a>(trigger.<a class="code" href="classAnalogTrigger.html#9873edc2ccb82375c63f69b4355de52d">CreateOutput</a>(<a class="code" href="classAnalogTriggerOutput.html#57642fbb2f393b4bb2f08bdbc12bea188c3936049a0290f5a3df3de94412841f">AnalogTriggerOutput::kState</a>));
<a name="l00103"></a>00103     <a class="code" href="classCounter.html#14f57c89d5e20d5ca590877dcc6be50f">ClearDownSource</a>();
<a name="l00104"></a>00104     <a class="code" href="classCounter.html#48b6c6ca34e369afb3e71d46e4c8763f" title="Was the upSource allocated locally?">m_allocatedUpSource</a> = <span class="keyword">true</span>;
<a name="l00105"></a>00105 }
<a name="l00106"></a>00106 
<a name="l00107"></a><a class="code" href="classCounter.html#37eface38998556665b5f88e35db7d16">00107</a> <a class="code" href="classCounter.html#1e05f69b5240fbab3e7ab351672167f0">Counter::Counter</a>(<a class="code" href="classCounterBase.html#3ce9d74c53e2571c1951cbb8e40eb88d">EncodingType</a> encodingType, <a class="code" href="classDigitalSource.html">DigitalSource</a> *upSource, <a class="code" href="classDigitalSource.html">DigitalSource</a> *downSource, <span class="keywordtype">bool</span> inverted)
<a name="l00108"></a>00108 {
<a name="l00109"></a>00109     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a>(encodingType == <a class="code" href="classCounterBase.html#3ce9d74c53e2571c1951cbb8e40eb88d4fefd46bb38db980f0779805f37d6ec1">k1X</a> || encodingType == <a class="code" href="classCounterBase.html#3ce9d74c53e2571c1951cbb8e40eb88d4f2e94d1337e71ef07e1def7eda6aaff">k2X</a>);
<a name="l00110"></a>00110     <a class="code" href="classCounter.html#b5a9481f8b36a832cb61d07617648061">InitCounter</a>(<a class="code" href="classCounter.html#843bf430e8d2828c39f8bd2b7cf382f614a5ae48b2a8cc61c626aecf0213b904">kExternalDirection</a>);
<a name="l00111"></a>00111     <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">SetUpSource</a>(upSource);
<a name="l00112"></a>00112     <a class="code" href="classCounter.html#61624bde53b714db868b422ad1e35813">SetDownSource</a>(downSource);
<a name="l00113"></a>00113 
<a name="l00114"></a>00114     <span class="keywordflow">if</span> (encodingType == <a class="code" href="classCounterBase.html#3ce9d74c53e2571c1951cbb8e40eb88d4fefd46bb38db980f0779805f37d6ec1">k1X</a>)
<a name="l00115"></a>00115     {
<a name="l00116"></a>00116         <a class="code" href="classCounter.html#f75f91bb8b014b04585b5bebb102e65d">SetUpSourceEdge</a>(<span class="keyword">true</span>, <span class="keyword">false</span>);
<a name="l00117"></a>00117         <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeTimerConfig_AverageSize(1, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00118"></a>00118     }
<a name="l00119"></a>00119     <span class="keywordflow">else</span>
<a name="l00120"></a>00120     {
<a name="l00121"></a>00121         <a class="code" href="classCounter.html#f75f91bb8b014b04585b5bebb102e65d">SetUpSourceEdge</a>(<span class="keyword">true</span>, <span class="keyword">true</span>);
<a name="l00122"></a>00122         <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeTimerConfig_AverageSize(2, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00123"></a>00123     }
<a name="l00124"></a>00124 
<a name="l00125"></a>00125     <a class="code" href="classCounter.html#929a270422ce7fe72955f76e33e60fd2">SetDownSourceEdge</a>(inverted, <span class="keyword">true</span>);
<a name="l00126"></a>00126 }
<a name="l00127"></a>00127 
<a name="l00131"></a><a class="code" href="classCounter.html#97f4728470ae8eff37d50ef1d6bb0135">00131</a> <a class="code" href="classCounter.html#97f4728470ae8eff37d50ef1d6bb0135">Counter::~Counter</a>()
<a name="l00132"></a>00132 {
<a name="l00133"></a>00133     <a class="code" href="classCounter.html#6701899f12600eabff3345223d65d4db">SetUpdateWhenEmpty</a>(<span class="keyword">true</span>);
<a name="l00134"></a>00134     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a>(<a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a> != <a class="code" href="nivision_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00135"></a>00135     <span class="keywordflow">if</span> (<a class="code" href="classCounter.html#48b6c6ca34e369afb3e71d46e4c8763f" title="Was the upSource allocated locally?">m_allocatedUpSource</a>)
<a name="l00136"></a>00136     {
<a name="l00137"></a>00137         <span class="keyword">delete</span> <a class="code" href="classCounter.html#2df9bd57f9087245937f592f0ce94411" title="What makes the counter count up.">m_upSource</a>;
<a name="l00138"></a>00138         <a class="code" href="classCounter.html#2df9bd57f9087245937f592f0ce94411" title="What makes the counter count up.">m_upSource</a> = <a class="code" href="nivision_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00139"></a>00139     }
<a name="l00140"></a>00140     <span class="keywordflow">if</span> (<a class="code" href="classCounter.html#5521efc14f1bf070500b96e94aac157b" title="Was the downSource allocated locally?">m_allocatedDownSource</a>)
<a name="l00141"></a>00141     {
<a name="l00142"></a>00142         <span class="keyword">delete</span> <a class="code" href="classCounter.html#335589e09e0a49039c7119bbaff8ab15" title="What makes the counter count down.">m_downSource</a>;
<a name="l00143"></a>00143         <a class="code" href="classCounter.html#335589e09e0a49039c7119bbaff8ab15" title="What makes the counter count down.">m_downSource</a> = <a class="code" href="nivision_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00144"></a>00144     }
<a name="l00145"></a>00145     <span class="keyword">delete</span> <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>;
<a name="l00146"></a>00146     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a> = <a class="code" href="nivision_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00147"></a>00147     counters-&gt;<a class="code" href="classResource.html#1f8793fe4ecfcd6c4ae1417c3d0745ca">Free</a>(<a class="code" href="classCounter.html#89138c5cda2c8745508e757ed7f3d322" title="The index of this counter.">m_index</a>);
<a name="l00148"></a>00148 }
<a name="l00149"></a>00149 
<a name="l00153"></a><a class="code" href="classCounter.html#f7dae6fde717e8759980591bb73c8b9f">00153</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">Counter::SetUpSource</a>(UINT32 slot, UINT32 channel)
<a name="l00154"></a>00154 {
<a name="l00155"></a>00155     <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">SetUpSource</a>(<span class="keyword">new</span> <a class="code" href="classDigitalInput.html">DigitalInput</a>(slot, channel));
<a name="l00156"></a>00156     <a class="code" href="classCounter.html#48b6c6ca34e369afb3e71d46e4c8763f" title="Was the upSource allocated locally?">m_allocatedUpSource</a> = <span class="keyword">true</span>;
<a name="l00157"></a>00157 }
<a name="l00158"></a>00158 
<a name="l00163"></a><a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">00163</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">Counter::SetUpSource</a>(UINT32 channel)
<a name="l00164"></a>00164 {
<a name="l00165"></a>00165     <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">SetUpSource</a>(<a class="code" href="classSensorBase.html#58b76ce72e9d70bf88b613b9f979a555">GetDefaultDigitalModule</a>(), channel);
<a name="l00166"></a>00166     <a class="code" href="classCounter.html#48b6c6ca34e369afb3e71d46e4c8763f" title="Was the upSource allocated locally?">m_allocatedUpSource</a> = <span class="keyword">true</span>;
<a name="l00167"></a>00167 }
<a name="l00168"></a>00168 
<a name="l00174"></a><a class="code" href="classCounter.html#8e9838e4f44bf8111356ecdbbab833d9">00174</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">Counter::SetUpSource</a>(<a class="code" href="classAnalogTrigger.html">AnalogTrigger</a> *analogTrigger, <a class="code" href="classAnalogTriggerOutput.html#57642fbb2f393b4bb2f08bdbc12bea18">AnalogTriggerOutput::Type</a> triggerType)
<a name="l00175"></a>00175 {
<a name="l00176"></a>00176     <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">SetUpSource</a>(analogTrigger-&gt;<a class="code" href="classAnalogTrigger.html#9873edc2ccb82375c63f69b4355de52d">CreateOutput</a>(triggerType));
<a name="l00177"></a>00177     <a class="code" href="classCounter.html#48b6c6ca34e369afb3e71d46e4c8763f" title="Was the upSource allocated locally?">m_allocatedUpSource</a> = <span class="keyword">true</span>;
<a name="l00178"></a>00178 }
<a name="l00179"></a>00179 
<a name="l00185"></a><a class="code" href="classCounter.html#8cddeb27c997a2cd5e7372367b6d8ced">00185</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">Counter::SetUpSource</a>(<a class="code" href="classAnalogTrigger.html">AnalogTrigger</a> &amp;analogTrigger, <a class="code" href="classAnalogTriggerOutput.html#57642fbb2f393b4bb2f08bdbc12bea18">AnalogTriggerOutput::Type</a> triggerType)
<a name="l00186"></a>00186 {
<a name="l00187"></a>00187     <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">SetUpSource</a>(&amp;analogTrigger, triggerType);
<a name="l00188"></a>00188 }
<a name="l00189"></a>00189 
<a name="l00194"></a><a class="code" href="classCounter.html#0687b78f7bf8a269d653eddca1819d5d">00194</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">Counter::SetUpSource</a>(<a class="code" href="classDigitalSource.html">DigitalSource</a> *source)
<a name="l00195"></a>00195 {
<a name="l00196"></a>00196     <span class="keywordflow">if</span> (<a class="code" href="classCounter.html#48b6c6ca34e369afb3e71d46e4c8763f" title="Was the upSource allocated locally?">m_allocatedUpSource</a>)
<a name="l00197"></a>00197     {
<a name="l00198"></a>00198         <span class="keyword">delete</span> <a class="code" href="classCounter.html#2df9bd57f9087245937f592f0ce94411" title="What makes the counter count up.">m_upSource</a>;
<a name="l00199"></a>00199         <a class="code" href="classCounter.html#2df9bd57f9087245937f592f0ce94411" title="What makes the counter count up.">m_upSource</a> = <a class="code" href="nivision_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00200"></a>00200         <a class="code" href="classCounter.html#48b6c6ca34e369afb3e71d46e4c8763f" title="Was the upSource allocated locally?">m_allocatedUpSource</a> = <span class="keyword">false</span>;
<a name="l00201"></a>00201     }
<a name="l00202"></a>00202     <a class="code" href="classCounter.html#2df9bd57f9087245937f592f0ce94411" title="What makes the counter count up.">m_upSource</a> = source;
<a name="l00203"></a>00203     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_UpSource_Module(source-&gt;<a class="code" href="classDigitalSource.html#688c770f6ec4bfdfe8ea61a78ca6c31d">GetModuleForRouting</a>(), &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00204"></a>00204     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_UpSource_Channel(source-&gt;<a class="code" href="classDigitalSource.html#793640916ab6c7ed63325756033f2752">GetChannelForRouting</a>(), &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00205"></a>00205     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_UpSource_AnalogTrigger(source-&gt;<a class="code" href="classDigitalSource.html#a9a9f4c8d6e54b94516b2b015bdb1ee6">GetAnalogTriggerForRouting</a>(), &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00206"></a>00206 
<a name="l00207"></a>00207     <span class="keywordflow">if</span>(<a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;readConfig_Mode(&amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>) == <a class="code" href="classCounter.html#843bf430e8d2828c39f8bd2b7cf382f61f2ec90867ee52429b067c33ffa20e49">kTwoPulse</a> ||
<a name="l00208"></a>00208             <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;readConfig_Mode(&amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>) == <a class="code" href="classCounter.html#843bf430e8d2828c39f8bd2b7cf382f614a5ae48b2a8cc61c626aecf0213b904">kExternalDirection</a>)
<a name="l00209"></a>00209     {
<a name="l00210"></a>00210         <a class="code" href="classCounter.html#f75f91bb8b014b04585b5bebb102e65d">SetUpSourceEdge</a>(<span class="keyword">true</span>, <span class="keyword">false</span>);
<a name="l00211"></a>00211     }
<a name="l00212"></a>00212     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;strobeReset(&amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00213"></a>00213     <a class="code" href="Utility_8h.html#8dd3b031e36607585b844aef60f80f6d">wpi_assertCleanStatus</a>(<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00214"></a>00214 }
<a name="l00215"></a>00215 
<a name="l00220"></a><a class="code" href="classCounter.html#0015c2da61df6011bfbaf20bbf62982d">00220</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">Counter::SetUpSource</a>(<a class="code" href="classDigitalSource.html">DigitalSource</a> &amp;source)
<a name="l00221"></a>00221 {
<a name="l00222"></a>00222     <a class="code" href="classCounter.html#2788b50d591e9b9058bc7250268ced5d">SetUpSource</a>(&amp;source);
<a name="l00223"></a>00223 }
<a name="l00224"></a>00224 
<a name="l00229"></a><a class="code" href="classCounter.html#f75f91bb8b014b04585b5bebb102e65d">00229</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#f75f91bb8b014b04585b5bebb102e65d">Counter::SetUpSourceEdge</a>(<span class="keywordtype">bool</span> risingEdge, <span class="keywordtype">bool</span> fallingEdge)
<a name="l00230"></a>00230 {
<a name="l00231"></a>00231     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a>(<a class="code" href="classCounter.html#2df9bd57f9087245937f592f0ce94411" title="What makes the counter count up.">m_upSource</a> != <a class="code" href="nivision_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00232"></a>00232     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_UpRisingEdge(risingEdge, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00233"></a>00233     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_UpFallingEdge(fallingEdge, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00234"></a>00234 }
<a name="l00235"></a>00235 
<a name="l00239"></a><a class="code" href="classCounter.html#dfbbfef3d5b90d61d2a3702c3876e599">00239</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#dfbbfef3d5b90d61d2a3702c3876e599">Counter::ClearUpSource</a>()
<a name="l00240"></a>00240 {
<a name="l00241"></a>00241     <span class="keywordflow">if</span> (<a class="code" href="classCounter.html#48b6c6ca34e369afb3e71d46e4c8763f" title="Was the upSource allocated locally?">m_allocatedUpSource</a>)
<a name="l00242"></a>00242     {
<a name="l00243"></a>00243         <span class="keyword">delete</span> <a class="code" href="classCounter.html#2df9bd57f9087245937f592f0ce94411" title="What makes the counter count up.">m_upSource</a>;
<a name="l00244"></a>00244         <a class="code" href="classCounter.html#2df9bd57f9087245937f592f0ce94411" title="What makes the counter count up.">m_upSource</a> = <a class="code" href="nivision_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00245"></a>00245         <a class="code" href="classCounter.html#48b6c6ca34e369afb3e71d46e4c8763f" title="Was the upSource allocated locally?">m_allocatedUpSource</a> = <span class="keyword">false</span>;
<a name="l00246"></a>00246     }
<a name="l00247"></a>00247     <span class="keywordtype">bool</span> state = <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;readConfig_Enable(&amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00248"></a>00248     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_Enable(<span class="keyword">false</span>, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00249"></a>00249     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_UpFallingEdge(<span class="keyword">false</span>, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00250"></a>00250     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_UpRisingEdge(<span class="keyword">false</span>, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00251"></a>00251     <span class="comment">// Index 0 of digital is always 0.</span>
<a name="l00252"></a>00252     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_UpSource_Channel(0, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00253"></a>00253     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_UpSource_AnalogTrigger(<span class="keyword">false</span>, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00254"></a>00254     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_Enable(state, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00255"></a>00255     <a class="code" href="Utility_8h.html#8dd3b031e36607585b844aef60f80f6d">wpi_assertCleanStatus</a>(<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00256"></a>00256 }
<a name="l00257"></a>00257 
<a name="l00262"></a><a class="code" href="classCounter.html#61624bde53b714db868b422ad1e35813">00262</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#61624bde53b714db868b422ad1e35813">Counter::SetDownSource</a>(UINT32 channel)
<a name="l00263"></a>00263 {
<a name="l00264"></a>00264     <a class="code" href="classCounter.html#61624bde53b714db868b422ad1e35813">SetDownSource</a>(<span class="keyword">new</span> <a class="code" href="classDigitalInput.html">DigitalInput</a>(channel));
<a name="l00265"></a>00265     <a class="code" href="classCounter.html#5521efc14f1bf070500b96e94aac157b" title="Was the downSource allocated locally?">m_allocatedDownSource</a> = <span class="keyword">true</span>;
<a name="l00266"></a>00266 }
<a name="l00267"></a>00267 
<a name="l00271"></a><a class="code" href="classCounter.html#0ff428aada4f88ce538fb9a6a61d37c7">00271</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#61624bde53b714db868b422ad1e35813">Counter::SetDownSource</a>(UINT32 slot, UINT32 channel)
<a name="l00272"></a>00272 {
<a name="l00273"></a>00273     <a class="code" href="classCounter.html#61624bde53b714db868b422ad1e35813">SetDownSource</a>(<span class="keyword">new</span> <a class="code" href="classDigitalInput.html">DigitalInput</a>(slot, channel));
<a name="l00274"></a>00274     <a class="code" href="classCounter.html#5521efc14f1bf070500b96e94aac157b" title="Was the downSource allocated locally?">m_allocatedDownSource</a> = <span class="keyword">true</span>;
<a name="l00275"></a>00275 }
<a name="l00276"></a>00276 
<a name="l00282"></a><a class="code" href="classCounter.html#672fefa4c325665617f38e6588d83541">00282</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#61624bde53b714db868b422ad1e35813">Counter::SetDownSource</a>(<a class="code" href="classAnalogTrigger.html">AnalogTrigger</a> *analogTrigger, <a class="code" href="classAnalogTriggerOutput.html#57642fbb2f393b4bb2f08bdbc12bea18">AnalogTriggerOutput::Type</a> triggerType)
<a name="l00283"></a>00283 {
<a name="l00284"></a>00284     <a class="code" href="classCounter.html#61624bde53b714db868b422ad1e35813">SetDownSource</a>(analogTrigger-&gt;<a class="code" href="classAnalogTrigger.html#9873edc2ccb82375c63f69b4355de52d">CreateOutput</a>(triggerType));
<a name="l00285"></a>00285     <a class="code" href="classCounter.html#5521efc14f1bf070500b96e94aac157b" title="Was the downSource allocated locally?">m_allocatedDownSource</a> = <span class="keyword">true</span>;
<a name="l00286"></a>00286 }
<a name="l00287"></a>00287 
<a name="l00293"></a><a class="code" href="classCounter.html#74064fcd79b179aaf782d4ae8e7bd42e">00293</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#61624bde53b714db868b422ad1e35813">Counter::SetDownSource</a>(<a class="code" href="classAnalogTrigger.html">AnalogTrigger</a> &amp;analogTrigger, <a class="code" href="classAnalogTriggerOutput.html#57642fbb2f393b4bb2f08bdbc12bea18">AnalogTriggerOutput::Type</a> triggerType)
<a name="l00294"></a>00294 {
<a name="l00295"></a>00295     <a class="code" href="classCounter.html#61624bde53b714db868b422ad1e35813">SetDownSource</a>(&amp;analogTrigger, triggerType);
<a name="l00296"></a>00296 }
<a name="l00297"></a>00297 
<a name="l00302"></a><a class="code" href="classCounter.html#667ea67a66e39b5ce6727f49253bae02">00302</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#61624bde53b714db868b422ad1e35813">Counter::SetDownSource</a>(<a class="code" href="classDigitalSource.html">DigitalSource</a> *source)
<a name="l00303"></a>00303 {
<a name="l00304"></a>00304     <span class="keywordflow">if</span> (<a class="code" href="classCounter.html#5521efc14f1bf070500b96e94aac157b" title="Was the downSource allocated locally?">m_allocatedDownSource</a>)
<a name="l00305"></a>00305     {
<a name="l00306"></a>00306         <span class="keyword">delete</span> <a class="code" href="classCounter.html#335589e09e0a49039c7119bbaff8ab15" title="What makes the counter count down.">m_downSource</a>;
<a name="l00307"></a>00307         <a class="code" href="classCounter.html#335589e09e0a49039c7119bbaff8ab15" title="What makes the counter count down.">m_downSource</a> = <a class="code" href="nivision_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00308"></a>00308         <a class="code" href="classCounter.html#5521efc14f1bf070500b96e94aac157b" title="Was the downSource allocated locally?">m_allocatedDownSource</a> = <span class="keyword">false</span>;
<a name="l00309"></a>00309     }
<a name="l00310"></a>00310     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> mode = <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;readConfig_Mode(&amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00311"></a>00311     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a>(mode == <a class="code" href="classCounter.html#843bf430e8d2828c39f8bd2b7cf382f61f2ec90867ee52429b067c33ffa20e49">kTwoPulse</a> || mode == <a class="code" href="classCounter.html#843bf430e8d2828c39f8bd2b7cf382f614a5ae48b2a8cc61c626aecf0213b904">kExternalDirection</a>);
<a name="l00312"></a>00312     <a class="code" href="classCounter.html#335589e09e0a49039c7119bbaff8ab15" title="What makes the counter count down.">m_downSource</a> = source;
<a name="l00313"></a>00313     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_DownSource_Module(source-&gt;<a class="code" href="classDigitalSource.html#688c770f6ec4bfdfe8ea61a78ca6c31d">GetModuleForRouting</a>(), &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00314"></a>00314     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_DownSource_Channel(source-&gt;<a class="code" href="classDigitalSource.html#793640916ab6c7ed63325756033f2752">GetChannelForRouting</a>(), &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00315"></a>00315     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_DownSource_AnalogTrigger(source-&gt;<a class="code" href="classDigitalSource.html#a9a9f4c8d6e54b94516b2b015bdb1ee6">GetAnalogTriggerForRouting</a>(), &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00316"></a>00316 
<a name="l00317"></a>00317     <a class="code" href="classCounter.html#929a270422ce7fe72955f76e33e60fd2">SetDownSourceEdge</a>(<span class="keyword">true</span>, <span class="keyword">false</span>);
<a name="l00318"></a>00318     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;strobeReset(&amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00319"></a>00319     <a class="code" href="Utility_8h.html#8dd3b031e36607585b844aef60f80f6d">wpi_assertCleanStatus</a>(<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00320"></a>00320 }
<a name="l00321"></a>00321 
<a name="l00326"></a><a class="code" href="classCounter.html#68fa4169dd3cf9a0c58de786f2d69c76">00326</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#61624bde53b714db868b422ad1e35813">Counter::SetDownSource</a>(<a class="code" href="classDigitalSource.html">DigitalSource</a> &amp;source)
<a name="l00327"></a>00327 {
<a name="l00328"></a>00328     <a class="code" href="classCounter.html#61624bde53b714db868b422ad1e35813">SetDownSource</a>(&amp;source);
<a name="l00329"></a>00329 }
<a name="l00330"></a>00330 
<a name="l00335"></a><a class="code" href="classCounter.html#929a270422ce7fe72955f76e33e60fd2">00335</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#929a270422ce7fe72955f76e33e60fd2">Counter::SetDownSourceEdge</a>(<span class="keywordtype">bool</span> risingEdge, <span class="keywordtype">bool</span> fallingEdge)
<a name="l00336"></a>00336 {
<a name="l00337"></a>00337     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a>(<a class="code" href="classCounter.html#335589e09e0a49039c7119bbaff8ab15" title="What makes the counter count down.">m_downSource</a> != <a class="code" href="nivision_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00338"></a>00338     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_DownRisingEdge(risingEdge, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00339"></a>00339     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_DownFallingEdge(fallingEdge, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00340"></a>00340 }
<a name="l00341"></a>00341 
<a name="l00345"></a><a class="code" href="classCounter.html#14f57c89d5e20d5ca590877dcc6be50f">00345</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#14f57c89d5e20d5ca590877dcc6be50f">Counter::ClearDownSource</a>()
<a name="l00346"></a>00346 {
<a name="l00347"></a>00347     <span class="keywordflow">if</span> (<a class="code" href="classCounter.html#5521efc14f1bf070500b96e94aac157b" title="Was the downSource allocated locally?">m_allocatedDownSource</a>)
<a name="l00348"></a>00348     {
<a name="l00349"></a>00349         <span class="keyword">delete</span> <a class="code" href="classCounter.html#335589e09e0a49039c7119bbaff8ab15" title="What makes the counter count down.">m_downSource</a>;
<a name="l00350"></a>00350         <a class="code" href="classCounter.html#335589e09e0a49039c7119bbaff8ab15" title="What makes the counter count down.">m_downSource</a> = <a class="code" href="nivision_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00351"></a>00351         <a class="code" href="classCounter.html#5521efc14f1bf070500b96e94aac157b" title="Was the downSource allocated locally?">m_allocatedDownSource</a> = <span class="keyword">false</span>;
<a name="l00352"></a>00352     }
<a name="l00353"></a>00353     <span class="keywordtype">bool</span> state = <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;readConfig_Enable(&amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00354"></a>00354     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_Enable(<span class="keyword">false</span>, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00355"></a>00355     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_DownFallingEdge(<span class="keyword">false</span>, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00356"></a>00356     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_DownRisingEdge(<span class="keyword">false</span>, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00357"></a>00357     <span class="comment">// Index 0 of digital is always 0.</span>
<a name="l00358"></a>00358     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_DownSource_Channel(0, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00359"></a>00359     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_DownSource_AnalogTrigger(<span class="keyword">false</span>, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00360"></a>00360     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_Enable(state, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00361"></a>00361     <a class="code" href="Utility_8h.html#8dd3b031e36607585b844aef60f80f6d">wpi_assertCleanStatus</a>(<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00362"></a>00362 }
<a name="l00363"></a>00363 
<a name="l00368"></a><a class="code" href="classCounter.html#a71cea0b77f6664454f0f56a665b00c4">00368</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#a71cea0b77f6664454f0f56a665b00c4">Counter::SetUpDownCounterMode</a>()
<a name="l00369"></a>00369 {
<a name="l00370"></a>00370     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_Mode(<a class="code" href="classCounter.html#843bf430e8d2828c39f8bd2b7cf382f61f2ec90867ee52429b067c33ffa20e49">kTwoPulse</a>, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00371"></a>00371     <a class="code" href="Utility_8h.html#8dd3b031e36607585b844aef60f80f6d">wpi_assertCleanStatus</a>(<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00372"></a>00372 }
<a name="l00373"></a>00373 
<a name="l00379"></a><a class="code" href="classCounter.html#750cad2fc33948da6a8f595bfdd126c8">00379</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#750cad2fc33948da6a8f595bfdd126c8">Counter::SetExternalDirectionMode</a>()
<a name="l00380"></a>00380 {
<a name="l00381"></a>00381     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_Mode(<a class="code" href="classCounter.html#843bf430e8d2828c39f8bd2b7cf382f614a5ae48b2a8cc61c626aecf0213b904">kExternalDirection</a>, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00382"></a>00382     <a class="code" href="Utility_8h.html#8dd3b031e36607585b844aef60f80f6d">wpi_assertCleanStatus</a>(<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00383"></a>00383 }
<a name="l00384"></a>00384 
<a name="l00389"></a><a class="code" href="classCounter.html#1047b8a9c109942ecbbeaa66a1ba1842">00389</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#1047b8a9c109942ecbbeaa66a1ba1842">Counter::SetSemiPeriodMode</a>(<span class="keywordtype">bool</span> highSemiPeriod)
<a name="l00390"></a>00390 {
<a name="l00391"></a>00391     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_Mode(<a class="code" href="classCounter.html#843bf430e8d2828c39f8bd2b7cf382f6eabb7c3bee3c25e4a1e608fbe5eeefd1">kSemiperiod</a>, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00392"></a>00392     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_UpRisingEdge(highSemiPeriod, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00393"></a>00393     <a class="code" href="classCounter.html#6701899f12600eabff3345223d65d4db">SetUpdateWhenEmpty</a>(<span class="keyword">false</span>);
<a name="l00394"></a>00394     <a class="code" href="Utility_8h.html#8dd3b031e36607585b844aef60f80f6d">wpi_assertCleanStatus</a>(<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00395"></a>00395 }
<a name="l00396"></a>00396 
<a name="l00402"></a><a class="code" href="classCounter.html#dc8d4c41b26c8654fe3775afdb6439f5">00402</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#dc8d4c41b26c8654fe3775afdb6439f5">Counter::SetPulseLengthMode</a>(<span class="keywordtype">float</span> threshold)
<a name="l00403"></a>00403 {
<a name="l00404"></a>00404     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_Mode(<a class="code" href="classCounter.html#843bf430e8d2828c39f8bd2b7cf382f66e41d5f2cc86ca62e2095744326c236a">kPulseLength</a>, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00405"></a>00405     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_PulseLengthThreshold((UINT32)(threshold * 1.0e6) * <a class="code" href="classSensorBase.html#62b93c02393e42cb99cb02f2ea5c3210">kSystemClockTicksPerMicrosecond</a>, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00406"></a>00406     <a class="code" href="Utility_8h.html#8dd3b031e36607585b844aef60f80f6d">wpi_assertCleanStatus</a>(<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00407"></a>00407 }
<a name="l00408"></a>00408 
<a name="l00414"></a><a class="code" href="classCounter.html#0766c0a11e84866758b20b29e2e17cc0">00414</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#0766c0a11e84866758b20b29e2e17cc0">Counter::Start</a>()
<a name="l00415"></a>00415 {
<a name="l00416"></a>00416     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_Enable(1, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00417"></a>00417     <a class="code" href="Utility_8h.html#8dd3b031e36607585b844aef60f80f6d">wpi_assertCleanStatus</a>(<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00418"></a>00418 }
<a name="l00419"></a>00419 
<a name="l00425"></a><a class="code" href="classCounter.html#d8b0c5e46e0360f93554530d90d553b8">00425</a> INT32 <a class="code" href="classCounter.html#d8b0c5e46e0360f93554530d90d553b8">Counter::Get</a>()
<a name="l00426"></a>00426 {
<a name="l00427"></a>00427     INT32 value = <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;readOutput_Value(&amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00428"></a>00428     <a class="code" href="Utility_8h.html#8dd3b031e36607585b844aef60f80f6d">wpi_assertCleanStatus</a>(<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00429"></a>00429     <span class="keywordflow">return</span> value;
<a name="l00430"></a>00430 }
<a name="l00431"></a>00431 
<a name="l00437"></a><a class="code" href="classCounter.html#006032d39fada9ad683ccc849d2f60d3">00437</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#006032d39fada9ad683ccc849d2f60d3">Counter::Reset</a>()
<a name="l00438"></a>00438 {
<a name="l00439"></a>00439     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;strobeReset(&amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00440"></a>00440     <a class="code" href="Utility_8h.html#8dd3b031e36607585b844aef60f80f6d">wpi_assertCleanStatus</a>(<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00441"></a>00441 }
<a name="l00442"></a>00442 
<a name="l00447"></a><a class="code" href="classCounter.html#a6ea006a3109769cc1e0a37dc25e11f4">00447</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#a6ea006a3109769cc1e0a37dc25e11f4">Counter::Stop</a>()
<a name="l00448"></a>00448 {
<a name="l00449"></a>00449     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeConfig_Enable(0, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00450"></a>00450     <a class="code" href="Utility_8h.html#8dd3b031e36607585b844aef60f80f6d">wpi_assertCleanStatus</a>(<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00451"></a>00451 }
<a name="l00452"></a>00452 
<a name="l00453"></a>00453 <span class="comment">/*</span>
<a name="l00454"></a>00454 <span class="comment"> * Get the Period of the most recent count.</span>
<a name="l00455"></a>00455 <span class="comment"> * Returns the time interval of the most recent count. This can be used for velocity calculations</span>
<a name="l00456"></a>00456 <span class="comment"> * to determine shaft speed.</span>
<a name="l00457"></a>00457 <span class="comment"> * @returns The period of the last two pulses in units of seconds.</span>
<a name="l00458"></a>00458 <span class="comment"> */</span>
<a name="l00459"></a><a class="code" href="classCounter.html#51030989a5ee306beaf40ac28ab362c0">00459</a> <span class="keywordtype">double</span> <a class="code" href="classCounter.html#51030989a5ee306beaf40ac28ab362c0">Counter::GetPeriod</a>()
<a name="l00460"></a>00460 {
<a name="l00461"></a>00461     tCounter::tTimerOutput output = <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;readTimerOutput(&amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00462"></a>00462     <span class="keywordtype">double</span> period;
<a name="l00463"></a>00463     <span class="keywordflow">if</span> (output.Stalled)
<a name="l00464"></a>00464     {
<a name="l00465"></a>00465         <span class="comment">// Return infinity</span>
<a name="l00466"></a>00466         <span class="keywordtype">double</span> zero = 0.0;
<a name="l00467"></a>00467         period = 1.0 / zero;
<a name="l00468"></a>00468     }
<a name="l00469"></a>00469     <span class="keywordflow">else</span>
<a name="l00470"></a>00470     {
<a name="l00471"></a>00471         <span class="comment">// output.Period is a fixed point number that counts by 2 (24 bits, 25 integer bits)</span>
<a name="l00472"></a>00472         period = (double)(output.Period &lt;&lt; 1) / (double)output.Count;
<a name="l00473"></a>00473     }
<a name="l00474"></a>00474     <a class="code" href="Utility_8h.html#8dd3b031e36607585b844aef60f80f6d">wpi_assertCleanStatus</a>(<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00475"></a>00475     <span class="keywordflow">return</span> period * 1.0e-6;
<a name="l00476"></a>00476 }
<a name="l00477"></a>00477 
<a name="l00485"></a><a class="code" href="classCounter.html#8496d29a6b9424f76075396e9c729bca">00485</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#8496d29a6b9424f76075396e9c729bca">Counter::SetMaxPeriod</a>(<span class="keywordtype">double</span> maxPeriod)
<a name="l00486"></a>00486 {
<a name="l00487"></a>00487     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeTimerConfig_StallPeriod((UINT32)(maxPeriod * 1.0e6), &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00488"></a>00488 }
<a name="l00489"></a>00489 
<a name="l00502"></a><a class="code" href="classCounter.html#6701899f12600eabff3345223d65d4db">00502</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#6701899f12600eabff3345223d65d4db">Counter::SetUpdateWhenEmpty</a>(<span class="keywordtype">bool</span> enabled)
<a name="l00503"></a>00503 {
<a name="l00504"></a>00504     <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;writeTimerConfig_UpdateWhenEmpty(enabled, &amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00505"></a>00505 }
<a name="l00506"></a>00506 
<a name="l00515"></a><a class="code" href="classCounter.html#e6bea5b908b1c276e8592e18656aaf21">00515</a> <span class="keywordtype">bool</span> <a class="code" href="classCounter.html#e6bea5b908b1c276e8592e18656aaf21">Counter::GetStopped</a>()
<a name="l00516"></a>00516 {
<a name="l00517"></a>00517     <span class="keywordflow">return</span> <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;readTimerOutput_Stalled(&amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00518"></a>00518 }
<a name="l00519"></a>00519 
<a name="l00524"></a><a class="code" href="classCounter.html#cdfa2215fb973249a5f0d2a9f2f3c6b6">00524</a> <span class="keywordtype">bool</span> <a class="code" href="classCounter.html#cdfa2215fb973249a5f0d2a9f2f3c6b6">Counter::GetDirection</a>()
<a name="l00525"></a>00525 {
<a name="l00526"></a>00526     <span class="keywordtype">bool</span> value = <a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;readOutput_Direction(&amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00527"></a>00527     <a class="code" href="Utility_8h.html#8dd3b031e36607585b844aef60f80f6d">wpi_assertCleanStatus</a>(<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>);
<a name="l00528"></a>00528     <span class="keywordflow">return</span> value;
<a name="l00529"></a>00529 }
<a name="l00530"></a>00530 
<a name="l00537"></a><a class="code" href="classCounter.html#b9f8c0a4b5491767c48262a5471992cd">00537</a> <span class="keywordtype">void</span> <a class="code" href="classCounter.html#b9f8c0a4b5491767c48262a5471992cd">Counter::SetReverseDirection</a>(<span class="keywordtype">bool</span> reverseDirection)
<a name="l00538"></a>00538 {
<a name="l00539"></a>00539     <span class="keywordflow">if</span> (<a class="code" href="classCounter.html#bae7026958bf55bd28f15443d81de738" title="The FPGA counter object.">m_counter</a>-&gt;readConfig_Mode(&amp;<a class="code" href="classErrorBase.html#94cef1c4df1d6def498a2b3c458408c4">status</a>) == <a class="code" href="classCounter.html#843bf430e8d2828c39f8bd2b7cf382f614a5ae48b2a8cc61c626aecf0213b904">kExternalDirection</a>)
<a name="l00540"></a>00540     {
<a name="l00541"></a>00541         <span class="keywordflow">if</span> (reverseDirection)
<a name="l00542"></a>00542             <a class="code" href="classCounter.html#929a270422ce7fe72955f76e33e60fd2">SetDownSourceEdge</a>(<span class="keyword">true</span>, <span class="keyword">true</span>);
<a name="l00543"></a>00543         <span class="keywordflow">else</span>
<a name="l00544"></a>00544             <a class="code" href="classCounter.html#929a270422ce7fe72955f76e33e60fd2">SetDownSourceEdge</a>(<span class="keyword">false</span>, <span class="keyword">true</span>);
<a name="l00545"></a>00545     }
<a name="l00546"></a>00546 }
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Feb 9 11:20:44 2011 for WPILIB by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
