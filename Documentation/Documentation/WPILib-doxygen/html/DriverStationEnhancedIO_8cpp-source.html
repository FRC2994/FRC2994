<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>WPILIB: DriverStationEnhancedIO.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>DriverStationEnhancedIO.cpp</h1><a href="DriverStationEnhancedIO_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*----------------------------------------------------------------------------*/</span>
<a name="l00002"></a>00002 <span class="comment">/* Copyright (c) FIRST 2008. All Rights Reserved.                             */</span>
<a name="l00003"></a>00003 <span class="comment">/* Open Source Software - may be modified and shared by FRC teams. The code   */</span>
<a name="l00004"></a>00004 <span class="comment">/* must be accompanied by the FIRST BSD license file in $(WIND_BASE)/WPILib.  */</span>
<a name="l00005"></a>00005 <span class="comment">/*----------------------------------------------------------------------------*/</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#include "<a class="code" href="DriverStationEnhancedIO_8h.html">DriverStationEnhancedIO.h</a>"</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include "<a class="code" href="Synchronized_8h.html">Synchronized.h</a>"</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include "<a class="code" href="Utility_8h.html">Utility.h</a>"</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include "<a class="code" href="WPIStatus_8h.html">WPIStatus.h</a>"</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;strLib.h&gt;</span>
<a name="l00012"></a>00012 
<a name="l00018"></a><a class="code" href="classDriverStationEnhancedIO.html#7ef3bb422173137cc49a04cf4dfbfb68">00018</a> <a class="code" href="classDriverStationEnhancedIO.html#7ef3bb422173137cc49a04cf4dfbfb68">DriverStationEnhancedIO::DriverStationEnhancedIO</a>()
<a name="l00019"></a>00019     : m_inputValid (false)
<a name="l00020"></a>00020     , m_outputValid (false)
<a name="l00021"></a>00021     , m_configChanged (false)
<a name="l00022"></a>00022     , m_requestEnhancedEnable (false)
<a name="l00023"></a>00023 {
<a name="l00024"></a>00024     bzero((<span class="keywordtype">char</span>*)&amp;<a class="code" href="classDriverStationEnhancedIO.html#80d5e4aef338cad2b61b30dec7d13f3c">m_inputData</a>, <span class="keyword">sizeof</span>(m_inputData));
<a name="l00025"></a>00025     bzero((<span class="keywordtype">char</span>*)&amp;<a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>, <span class="keyword">sizeof</span>(m_outputData));
<a name="l00026"></a>00026     m_outputData.size = <span class="keyword">sizeof</span>(m_outputData) - 1;
<a name="l00027"></a>00027     m_outputData.id = <a class="code" href="classDriverStationEnhancedIO.html#5b129ec3697d59a14078d725b615dbf507bb856fcf2ce9c9598057d11e5ca0ab">kOutputBlockID</a>;
<a name="l00028"></a>00028     <span class="comment">// Expected to be active low, so initialize inactive.</span>
<a name="l00029"></a>00029     m_outputData.data.fixed_digital_out = 0x3;
<a name="l00030"></a>00030     <a class="code" href="classDriverStationEnhancedIO.html#712c6036a57b705de76c9f56b91c8250">m_inputDataSemaphore</a> = semMCreate(SEM_Q_PRIORITY | SEM_DELETE_SAFE | SEM_INVERSION_SAFE);
<a name="l00031"></a>00031     <a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a> = semMCreate(SEM_Q_PRIORITY | SEM_DELETE_SAFE | SEM_INVERSION_SAFE);
<a name="l00032"></a>00032     <a class="code" href="classDriverStationEnhancedIO.html#5c3be8a8e3bbd239fff2948cb8f225ef">m_encoderOffsets</a>[0] = 0;
<a name="l00033"></a>00033     <a class="code" href="classDriverStationEnhancedIO.html#5c3be8a8e3bbd239fff2948cb8f225ef">m_encoderOffsets</a>[1] = 0;
<a name="l00034"></a>00034 }
<a name="l00035"></a>00035 
<a name="l00041"></a><a class="code" href="classDriverStationEnhancedIO.html#a558fa234bfc3854af2812ff30d3fa5e">00041</a> <a class="code" href="classDriverStationEnhancedIO.html#a558fa234bfc3854af2812ff30d3fa5e">DriverStationEnhancedIO::~DriverStationEnhancedIO</a>()
<a name="l00042"></a>00042 {
<a name="l00043"></a>00043     semDelete(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00044"></a>00044     semDelete(<a class="code" href="classDriverStationEnhancedIO.html#712c6036a57b705de76c9f56b91c8250">m_inputDataSemaphore</a>);
<a name="l00045"></a>00045 }
<a name="l00046"></a>00046 
<a name="l00052"></a><a class="code" href="classDriverStationEnhancedIO.html#b750f78a8004fff395213ad9103fcf6f">00052</a> <span class="keywordtype">void</span> <a class="code" href="classDriverStationEnhancedIO.html#b750f78a8004fff395213ad9103fcf6f">DriverStationEnhancedIO::UpdateData</a>()
<a name="l00053"></a>00053 {
<a name="l00054"></a>00054     INT32 retVal;
<a name="l00055"></a>00055     {
<a name="l00056"></a>00056         <a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html">status_block_t</a> tempOutputData;
<a name="l00057"></a>00057         <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00058"></a>00058         <span class="keywordflow">if</span> (<a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a> || <a class="code" href="classDriverStationEnhancedIO.html#efd96ae34865efadacdf46ee4223659a">m_configChanged</a> || <a class="code" href="classDriverStationEnhancedIO.html#2d37b5578aeac9292de14c7e964027b3">m_requestEnhancedEnable</a>)
<a name="l00059"></a>00059         {
<a name="l00060"></a>00060             <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#7f06a5f880c84a4c093ba254e85a1ffd">flags</a> = <a class="code" href="classDriverStationEnhancedIO.html#10d17f8358eec3a15ecce197abfe63b83e566709d935f585e21908b432eaa7ca">kStatusValid</a>;
<a name="l00061"></a>00061             <span class="keywordflow">if</span> (<a class="code" href="classDriverStationEnhancedIO.html#2d37b5578aeac9292de14c7e964027b3">m_requestEnhancedEnable</a>)
<a name="l00062"></a>00062             {
<a name="l00063"></a>00063                 <span class="comment">// Someone called one of the get config APIs, but we are not in enhanced mode.</span>
<a name="l00064"></a>00064                 <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#7f06a5f880c84a4c093ba254e85a1ffd">flags</a> |= <a class="code" href="classDriverStationEnhancedIO.html#10d17f8358eec3a15ecce197abfe63b8e9fd782d2d1c08917c1088521b0fa241">kForceEnhancedMode</a>;
<a name="l00065"></a>00065             }
<a name="l00066"></a>00066             <span class="keywordflow">if</span> (<a class="code" href="classDriverStationEnhancedIO.html#efd96ae34865efadacdf46ee4223659a">m_configChanged</a>)
<a name="l00067"></a>00067             {
<a name="l00068"></a>00068                 <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a>)
<a name="l00069"></a>00069                 {
<a name="l00070"></a>00070                     <span class="comment">// Someone called one of the set config APIs, but we are not in enhanced mode.</span>
<a name="l00071"></a>00071                     <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#7f06a5f880c84a4c093ba254e85a1ffd">flags</a> |= <a class="code" href="classDriverStationEnhancedIO.html#10d17f8358eec3a15ecce197abfe63b8e9fd782d2d1c08917c1088521b0fa241">kForceEnhancedMode</a>;
<a name="l00072"></a>00072                 }
<a name="l00073"></a>00073                 <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#7f06a5f880c84a4c093ba254e85a1ffd">flags</a> |= <a class="code" href="classDriverStationEnhancedIO.html#10d17f8358eec3a15ecce197abfe63b8b39befbfe86fbd445ff42ffdd508be72">kStatusConfigChanged</a>;
<a name="l00074"></a>00074             }
<a name="l00075"></a>00075             overrideIOConfig((<span class="keywordtype">char</span>*)&amp;<a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>, 5);
<a name="l00076"></a>00076         }
<a name="l00077"></a>00077         retVal = getDynamicControlData(<a class="code" href="classDriverStationEnhancedIO.html#5b129ec3697d59a14078d725b615dbf507bb856fcf2ce9c9598057d11e5ca0ab">kOutputBlockID</a>, (<span class="keywordtype">char</span>*)&amp;tempOutputData, <span class="keyword">sizeof</span>(<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html">status_block_t</a>), 5);
<a name="l00078"></a>00078         <span class="keywordflow">if</span> (retVal == 0)
<a name="l00079"></a>00079         {
<a name="l00080"></a>00080             <span class="keywordflow">if</span> (<a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a>)
<a name="l00081"></a>00081             {
<a name="l00082"></a>00082                 <span class="keywordflow">if</span> (<a class="code" href="classDriverStationEnhancedIO.html#efd96ae34865efadacdf46ee4223659a">m_configChanged</a>)
<a name="l00083"></a>00083                 {
<a name="l00084"></a>00084                     <span class="comment">// If our config change made the round trip then clear the flag.</span>
<a name="l00085"></a>00085                     <span class="keywordflow">if</span> (<a class="code" href="classDriverStationEnhancedIO.html#ddab9dca2c01ac5a4f6988bcc33bc0ec">IsConfigEqual</a>(tempOutputData, <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>))
<a name="l00086"></a>00086                     {
<a name="l00087"></a>00087                         <a class="code" href="classDriverStationEnhancedIO.html#efd96ae34865efadacdf46ee4223659a">m_configChanged</a> = <span class="keyword">false</span>;
<a name="l00088"></a>00088                     }
<a name="l00089"></a>00089                 }
<a name="l00090"></a>00090                 <span class="keywordflow">else</span>
<a name="l00091"></a>00091                 {
<a name="l00092"></a>00092                     <span class="comment">// TODO: This won't work until artf1128 is fixed</span>
<a name="l00093"></a>00093                     <span class="comment">//if (tempOutputData.flags &amp; kStatusConfigChanged)</span>
<a name="l00094"></a>00094                     {
<a name="l00095"></a>00095                         <span class="comment">// Configuration was updated on the DS, so update our local cache.</span>
<a name="l00096"></a>00096                         <a class="code" href="classDriverStationEnhancedIO.html#3c04f228a4b21f54b13d860ae11ca6e0">MergeConfigIntoOutput</a>(tempOutputData, <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>);
<a name="l00097"></a>00097                     }
<a name="l00098"></a>00098                 }
<a name="l00099"></a>00099             }
<a name="l00100"></a>00100             <span class="keywordflow">else</span>
<a name="l00101"></a>00101             {
<a name="l00102"></a>00102                 <span class="comment">// Initialize the local cache.</span>
<a name="l00103"></a>00103                 <a class="code" href="classDriverStationEnhancedIO.html#3c04f228a4b21f54b13d860ae11ca6e0">MergeConfigIntoOutput</a>(tempOutputData, <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>);
<a name="l00104"></a>00104             }
<a name="l00105"></a>00105             <a class="code" href="classDriverStationEnhancedIO.html#2d37b5578aeac9292de14c7e964027b3">m_requestEnhancedEnable</a> = <span class="keyword">false</span>;
<a name="l00106"></a>00106             <a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a> = <span class="keyword">true</span>;
<a name="l00107"></a>00107         }
<a name="l00108"></a>00108         <span class="keywordflow">else</span>
<a name="l00109"></a>00109         {
<a name="l00110"></a>00110             <a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a> = <span class="keyword">false</span>;
<a name="l00111"></a>00111             <a class="code" href="classDriverStationEnhancedIO.html#8a569913026ca64d61da7caf6c2c4777">m_inputValid</a> = <span class="keyword">false</span>;
<a name="l00112"></a>00112         }
<a name="l00113"></a>00113     }
<a name="l00114"></a>00114     {
<a name="l00115"></a>00115         <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#712c6036a57b705de76c9f56b91c8250">m_inputDataSemaphore</a>);
<a name="l00116"></a>00116         <a class="code" href="structDriverStationEnhancedIO_1_1control__block__t.html">control_block_t</a> tempInputData;
<a name="l00117"></a>00117         retVal = getDynamicControlData(<a class="code" href="classDriverStationEnhancedIO.html#5b129ec3697d59a14078d725b615dbf5682f833f3ef7cf0c56d02ee044e1c4ae">kInputBlockID</a>, (<span class="keywordtype">char</span>*)&amp;tempInputData, <span class="keyword">sizeof</span>(<a class="code" href="structDriverStationEnhancedIO_1_1control__block__t.html">control_block_t</a>), 5);
<a name="l00118"></a>00118         <span class="keywordflow">if</span> (retVal == 0 &amp;&amp; tempInputData.data.api_version == <a class="code" href="DriverStationEnhancedIO_8h.html#6ebc768d15efee6c7cd2de2c36781425">kSupportedAPIVersion</a>)
<a name="l00119"></a>00119         {
<a name="l00120"></a>00120             <a class="code" href="classDriverStationEnhancedIO.html#80d5e4aef338cad2b61b30dec7d13f3c">m_inputData</a> = tempInputData;
<a name="l00121"></a>00121             <a class="code" href="classDriverStationEnhancedIO.html#8a569913026ca64d61da7caf6c2c4777">m_inputValid</a> = <span class="keyword">true</span>;
<a name="l00122"></a>00122         }
<a name="l00123"></a>00123         <span class="keywordflow">else</span>
<a name="l00124"></a>00124         {
<a name="l00125"></a>00125             <a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a> = <span class="keyword">false</span>;
<a name="l00126"></a>00126             <a class="code" href="classDriverStationEnhancedIO.html#8a569913026ca64d61da7caf6c2c4777">m_inputValid</a> = <span class="keyword">false</span>;
<a name="l00127"></a>00127         }
<a name="l00128"></a>00128     }
<a name="l00129"></a>00129 }
<a name="l00130"></a>00130 
<a name="l00134"></a><a class="code" href="classDriverStationEnhancedIO.html#3c04f228a4b21f54b13d860ae11ca6e0">00134</a> <span class="keywordtype">void</span> <a class="code" href="classDriverStationEnhancedIO.html#3c04f228a4b21f54b13d860ae11ca6e0">DriverStationEnhancedIO::MergeConfigIntoOutput</a>(<span class="keyword">const</span> <a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html">status_block_t</a> &amp;dsOutputBlock, <a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html">status_block_t</a> &amp;localCache)
<a name="l00135"></a>00135 {
<a name="l00136"></a>00136     localCache.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#3daedbd125be7b2f0759b44e978d1f6d">digital</a> = (localCache.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#3daedbd125be7b2f0759b44e978d1f6d">digital</a> &amp; dsOutputBlock.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#805d9dbb9df998bd8a83ce0b764bba2d">digital_oe</a>) |
<a name="l00137"></a>00137         (dsOutputBlock.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#3daedbd125be7b2f0759b44e978d1f6d">digital</a> &amp; ~dsOutputBlock.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#805d9dbb9df998bd8a83ce0b764bba2d">digital_oe</a>);
<a name="l00138"></a>00138     localCache.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#805d9dbb9df998bd8a83ce0b764bba2d">digital_oe</a> = dsOutputBlock.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#805d9dbb9df998bd8a83ce0b764bba2d">digital_oe</a>;
<a name="l00139"></a>00139     localCache.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#04fdc9dc2b40097061ec594330af0b15">digital_pe</a> = dsOutputBlock.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#04fdc9dc2b40097061ec594330af0b15">digital_pe</a>;
<a name="l00140"></a>00140     localCache.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#c448838a8a93fe7c0fb0ad6feece41eb">pwm_period</a>[0] = dsOutputBlock.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#c448838a8a93fe7c0fb0ad6feece41eb">pwm_period</a>[0];
<a name="l00141"></a>00141     localCache.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#c448838a8a93fe7c0fb0ad6feece41eb">pwm_period</a>[1] = dsOutputBlock.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#c448838a8a93fe7c0fb0ad6feece41eb">pwm_period</a>[1];
<a name="l00142"></a>00142     localCache.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#99880000400ed5a4d48423450cc9d878">enables</a> = dsOutputBlock.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#99880000400ed5a4d48423450cc9d878">enables</a>;
<a name="l00143"></a>00143 }
<a name="l00144"></a>00144 
<a name="l00148"></a><a class="code" href="classDriverStationEnhancedIO.html#ddab9dca2c01ac5a4f6988bcc33bc0ec">00148</a> <span class="keywordtype">bool</span> <a class="code" href="classDriverStationEnhancedIO.html#ddab9dca2c01ac5a4f6988bcc33bc0ec">DriverStationEnhancedIO::IsConfigEqual</a>(<span class="keyword">const</span> <a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html">status_block_t</a> &amp;dsOutputBlock, <span class="keyword">const</span> <a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html">status_block_t</a> &amp;localCache)
<a name="l00149"></a>00149 {
<a name="l00150"></a>00150     <span class="keywordflow">if</span> (localCache.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#805d9dbb9df998bd8a83ce0b764bba2d">digital_oe</a> != dsOutputBlock.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#805d9dbb9df998bd8a83ce0b764bba2d">digital_oe</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00151"></a>00151     <span class="keywordflow">if</span> ((localCache.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#3daedbd125be7b2f0759b44e978d1f6d">digital</a> &amp; ~dsOutputBlock.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#3daedbd125be7b2f0759b44e978d1f6d">digital</a>) !=
<a name="l00152"></a>00152         (dsOutputBlock.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#3daedbd125be7b2f0759b44e978d1f6d">digital</a> &amp; ~dsOutputBlock.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#3daedbd125be7b2f0759b44e978d1f6d">digital</a>)) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00153"></a>00153     <span class="keywordflow">if</span> (localCache.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#04fdc9dc2b40097061ec594330af0b15">digital_pe</a> != dsOutputBlock.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#04fdc9dc2b40097061ec594330af0b15">digital_pe</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00154"></a>00154     <span class="keywordflow">if</span> (localCache.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#c448838a8a93fe7c0fb0ad6feece41eb">pwm_period</a>[0] != dsOutputBlock.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#c448838a8a93fe7c0fb0ad6feece41eb">pwm_period</a>[0]) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00155"></a>00155     <span class="keywordflow">if</span> (localCache.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#c448838a8a93fe7c0fb0ad6feece41eb">pwm_period</a>[1] != dsOutputBlock.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#c448838a8a93fe7c0fb0ad6feece41eb">pwm_period</a>[1]) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00156"></a>00156     <span class="keywordflow">if</span> (localCache.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#99880000400ed5a4d48423450cc9d878">enables</a> != dsOutputBlock.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#99880000400ed5a4d48423450cc9d878">enables</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00157"></a>00157     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00158"></a>00158 }
<a name="l00159"></a>00159 
<a name="l00166"></a><a class="code" href="classDriverStationEnhancedIO.html#594f2ddea855e046abcf50406542a4ca">00166</a> <span class="keywordtype">double</span> <a class="code" href="classDriverStationEnhancedIO.html#594f2ddea855e046abcf50406542a4ca">DriverStationEnhancedIO::GetAcceleration</a>(<a class="code" href="classDriverStationEnhancedIO.html#fb56fd14d914a341491e548bfb7e3bcc">tAccelChannel</a> channel)
<a name="l00167"></a>00167 {
<a name="l00168"></a>00168     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((channel &gt;= 0) &amp;&amp; (channel &lt;= 2));
<a name="l00169"></a>00169     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#8a569913026ca64d61da7caf6c2c4777">m_inputValid</a>)
<a name="l00170"></a>00170     {
<a name="l00171"></a>00171         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00172"></a>00172         <span class="keywordflow">return</span> 0.0;
<a name="l00173"></a>00173     }
<a name="l00174"></a>00174     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#712c6036a57b705de76c9f56b91c8250">m_inputDataSemaphore</a>);
<a name="l00175"></a>00175     <span class="keywordflow">return</span> (<a class="code" href="classDriverStationEnhancedIO.html#80d5e4aef338cad2b61b30dec7d13f3c">m_inputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1control__block__t.html#9feaea468e6b09ee7081208555a2c06f">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1input__t.html#fb5714392841cd69f11dd84f9ed57bdc">accel</a>[channel] - <a class="code" href="DriverStationEnhancedIO_8h.html#e73433b94373343939e33d3c225e3650">kAccelOffset</a>) / <a class="code" href="DriverStationEnhancedIO_8h.html#14273c561bdc667896f3aeb44a674c8e">kAccelScale</a>;
<a name="l00176"></a>00176 }
<a name="l00177"></a>00177 
<a name="l00184"></a><a class="code" href="classDriverStationEnhancedIO.html#8a4d31fb1c8845f33de2da37c559f016">00184</a> <span class="keywordtype">double</span> <a class="code" href="classDriverStationEnhancedIO.html#8a4d31fb1c8845f33de2da37c559f016">DriverStationEnhancedIO::GetAnalogIn</a>(UINT32 channel)
<a name="l00185"></a>00185 {
<a name="l00186"></a>00186     <span class="comment">// 3.3V is the analog reference voltage</span>
<a name="l00187"></a>00187     <span class="keywordflow">return</span> <a class="code" href="classDriverStationEnhancedIO.html#37c9af7405e84233c47a708be5a3c53a">GetAnalogInRatio</a>(channel) * <a class="code" href="DriverStationEnhancedIO_8h.html#76de563700ff16f91fa4776a81aad0c4">kAnalogInputReference</a>;
<a name="l00188"></a>00188 }
<a name="l00189"></a>00189 
<a name="l00196"></a><a class="code" href="classDriverStationEnhancedIO.html#37c9af7405e84233c47a708be5a3c53a">00196</a> <span class="keywordtype">double</span> <a class="code" href="classDriverStationEnhancedIO.html#37c9af7405e84233c47a708be5a3c53a">DriverStationEnhancedIO::GetAnalogInRatio</a>(UINT32 channel)
<a name="l00197"></a>00197 {
<a name="l00198"></a>00198     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((channel &gt;= 1) &amp;&amp; (channel &lt;= 8));
<a name="l00199"></a>00199     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#8a569913026ca64d61da7caf6c2c4777">m_inputValid</a>)
<a name="l00200"></a>00200     {
<a name="l00201"></a>00201         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00202"></a>00202         <span class="keywordflow">return</span> 0.0;
<a name="l00203"></a>00203     }
<a name="l00204"></a>00204     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#712c6036a57b705de76c9f56b91c8250">m_inputDataSemaphore</a>);
<a name="l00205"></a>00205     <span class="keywordflow">return</span> <a class="code" href="classDriverStationEnhancedIO.html#80d5e4aef338cad2b61b30dec7d13f3c">m_inputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1control__block__t.html#9feaea468e6b09ee7081208555a2c06f">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1input__t.html#f54e9eb215912fd4501ad8aaeab49c75">analog</a>[channel-1] / <a class="code" href="DriverStationEnhancedIO_8h.html#7e204fd528d1d5640c11bbac6af936c1">kAnalogInputResolution</a>;
<a name="l00206"></a>00206 }
<a name="l00207"></a>00207 
<a name="l00217"></a><a class="code" href="classDriverStationEnhancedIO.html#7cefa1bbdd5c1b7520e0268a17bd75db">00217</a> <span class="keywordtype">double</span> <a class="code" href="classDriverStationEnhancedIO.html#7cefa1bbdd5c1b7520e0268a17bd75db">DriverStationEnhancedIO::GetAnalogOut</a>(UINT32 channel)
<a name="l00218"></a>00218 {
<a name="l00219"></a>00219     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((channel &gt;= 1) &amp;&amp; (channel &lt;= 2));
<a name="l00220"></a>00220     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a>)
<a name="l00221"></a>00221     {
<a name="l00222"></a>00222         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00223"></a>00223         <span class="keywordflow">return</span> 0.0;
<a name="l00224"></a>00224     }
<a name="l00225"></a>00225 
<a name="l00226"></a>00226     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00227"></a>00227     <span class="keywordflow">return</span> <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#618653a535513ed10751304af4bba90d">dac</a>[channel-1] * <a class="code" href="DriverStationEnhancedIO_8h.html#9f68bf31ab03ab886a4471261f8b0c95">kAnalogOutputReference</a> / <a class="code" href="DriverStationEnhancedIO_8h.html#71deae3cee73d3cc5efa285b81eabc31">kAnalogOutputResolution</a>;
<a name="l00228"></a>00228 }
<a name="l00229"></a>00229 
<a name="l00243"></a><a class="code" href="classDriverStationEnhancedIO.html#b6888ed427c283821a7b6e7e728486bc">00243</a> <span class="keywordtype">void</span> <a class="code" href="classDriverStationEnhancedIO.html#b6888ed427c283821a7b6e7e728486bc">DriverStationEnhancedIO::SetAnalogOut</a>(UINT32 channel, <span class="keywordtype">double</span> value)
<a name="l00244"></a>00244 {
<a name="l00245"></a>00245     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((channel &gt;= 1) &amp;&amp; (channel &lt;= 2));
<a name="l00246"></a>00246     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a>)
<a name="l00247"></a>00247     {
<a name="l00248"></a>00248         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00249"></a>00249         <span class="keywordflow">return</span>;
<a name="l00250"></a>00250     }
<a name="l00251"></a>00251     <span class="keywordflow">if</span> (value &lt; 0.0) value = 0.0;
<a name="l00252"></a>00252     <span class="keywordflow">if</span> (value &gt; <a class="code" href="DriverStationEnhancedIO_8h.html#9f68bf31ab03ab886a4471261f8b0c95">kAnalogOutputReference</a>) value = <a class="code" href="DriverStationEnhancedIO_8h.html#9f68bf31ab03ab886a4471261f8b0c95">kAnalogOutputReference</a>;
<a name="l00253"></a>00253 
<a name="l00254"></a>00254     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00255"></a>00255     <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#618653a535513ed10751304af4bba90d">dac</a>[channel-1] = (UINT8)(value / <a class="code" href="DriverStationEnhancedIO_8h.html#9f68bf31ab03ab886a4471261f8b0c95">kAnalogOutputReference</a> * <a class="code" href="DriverStationEnhancedIO_8h.html#71deae3cee73d3cc5efa285b81eabc31">kAnalogOutputResolution</a>);
<a name="l00256"></a>00256 }
<a name="l00257"></a>00257 
<a name="l00273"></a><a class="code" href="classDriverStationEnhancedIO.html#8fe07c23d485a9dac1b9821583c539b6">00273</a> <span class="keywordtype">bool</span> <a class="code" href="classDriverStationEnhancedIO.html#8fe07c23d485a9dac1b9821583c539b6">DriverStationEnhancedIO::GetButton</a>(UINT32 channel)
<a name="l00274"></a>00274 {
<a name="l00275"></a>00275     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((channel &gt;= 1) &amp;&amp; (channel &lt;= 6));
<a name="l00276"></a>00276     <span class="keywordflow">return</span> ((<a class="code" href="classDriverStationEnhancedIO.html#04ed7d81517bc526ef6897a006bd3782">GetButtons</a>() &gt;&gt; (channel-1)) &amp; 1) != 0;
<a name="l00277"></a>00277 }
<a name="l00278"></a>00278 
<a name="l00284"></a><a class="code" href="classDriverStationEnhancedIO.html#04ed7d81517bc526ef6897a006bd3782">00284</a> UINT8 <a class="code" href="classDriverStationEnhancedIO.html#04ed7d81517bc526ef6897a006bd3782">DriverStationEnhancedIO::GetButtons</a>()
<a name="l00285"></a>00285 {
<a name="l00286"></a>00286     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#8a569913026ca64d61da7caf6c2c4777">m_inputValid</a>)
<a name="l00287"></a>00287     {
<a name="l00288"></a>00288         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00289"></a>00289         <span class="keywordflow">return</span> 0;
<a name="l00290"></a>00290     }
<a name="l00291"></a>00291     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#712c6036a57b705de76c9f56b91c8250">m_inputDataSemaphore</a>);
<a name="l00292"></a>00292     <span class="keywordflow">return</span> <a class="code" href="classDriverStationEnhancedIO.html#80d5e4aef338cad2b61b30dec7d13f3c">m_inputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1control__block__t.html#9feaea468e6b09ee7081208555a2c06f">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1input__t.html#6c1d7243fa35aeabf79fa4f2e237ece9">buttons</a>;
<a name="l00293"></a>00293 }
<a name="l00294"></a>00294 
<a name="l00301"></a><a class="code" href="classDriverStationEnhancedIO.html#34d6429692d4a27bc384533319e4127b">00301</a> <span class="keywordtype">void</span> <a class="code" href="classDriverStationEnhancedIO.html#34d6429692d4a27bc384533319e4127b">DriverStationEnhancedIO::SetLED</a>(UINT32 channel, <span class="keywordtype">bool</span> value)
<a name="l00302"></a>00302 {
<a name="l00303"></a>00303     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((channel &gt;= 1) &amp;&amp; (channel &lt;= 8));
<a name="l00304"></a>00304     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a>)
<a name="l00305"></a>00305     {
<a name="l00306"></a>00306         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00307"></a>00307         <span class="keywordflow">return</span>;
<a name="l00308"></a>00308     }
<a name="l00309"></a>00309     UINT8 leds;
<a name="l00310"></a>00310     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00311"></a>00311     leds = <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#a92d8c3243bf5442272529735ce077e4">leds</a>;
<a name="l00312"></a>00312 
<a name="l00313"></a>00313     leds &amp;= ~(1 &lt;&lt; (channel-1));
<a name="l00314"></a>00314     <span class="keywordflow">if</span> (value) leds |= 1 &lt;&lt; (channel-1);
<a name="l00315"></a>00315 
<a name="l00316"></a>00316     <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#a92d8c3243bf5442272529735ce077e4">leds</a> = leds;
<a name="l00317"></a>00317 }
<a name="l00318"></a>00318 
<a name="l00324"></a><a class="code" href="classDriverStationEnhancedIO.html#476ebdc37d1dd1fa58ab0a0ec09c1c17">00324</a> <span class="keywordtype">void</span> <a class="code" href="classDriverStationEnhancedIO.html#476ebdc37d1dd1fa58ab0a0ec09c1c17">DriverStationEnhancedIO::SetLEDs</a>(UINT8 value)
<a name="l00325"></a>00325 {
<a name="l00326"></a>00326     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a>)
<a name="l00327"></a>00327     {
<a name="l00328"></a>00328         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00329"></a>00329         <span class="keywordflow">return</span>;
<a name="l00330"></a>00330     }
<a name="l00331"></a>00331     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00332"></a>00332     <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#a92d8c3243bf5442272529735ce077e4">leds</a> = value;
<a name="l00333"></a>00333 }
<a name="l00334"></a>00334 
<a name="l00341"></a><a class="code" href="classDriverStationEnhancedIO.html#e7cf63b5f341ddb29b9e3ef988374747">00341</a> <span class="keywordtype">bool</span> <a class="code" href="classDriverStationEnhancedIO.html#e7cf63b5f341ddb29b9e3ef988374747">DriverStationEnhancedIO::GetDigital</a>(UINT32 channel)
<a name="l00342"></a>00342 {
<a name="l00343"></a>00343     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((channel &gt;= 1) &amp;&amp; (channel &lt;= 16));
<a name="l00344"></a>00344     <span class="keywordflow">return</span> ((<a class="code" href="classDriverStationEnhancedIO.html#052a9491d9661576d66896a4658e1509">GetDigitals</a>() &gt;&gt; (channel-1)) &amp; 1) != 0;
<a name="l00345"></a>00345 }
<a name="l00346"></a>00346 
<a name="l00352"></a><a class="code" href="classDriverStationEnhancedIO.html#052a9491d9661576d66896a4658e1509">00352</a> UINT16 <a class="code" href="classDriverStationEnhancedIO.html#052a9491d9661576d66896a4658e1509">DriverStationEnhancedIO::GetDigitals</a>()
<a name="l00353"></a>00353 {
<a name="l00354"></a>00354     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#8a569913026ca64d61da7caf6c2c4777">m_inputValid</a>)
<a name="l00355"></a>00355     {
<a name="l00356"></a>00356         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00357"></a>00357         <span class="keywordflow">return</span> 0;
<a name="l00358"></a>00358     }
<a name="l00359"></a>00359     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#712c6036a57b705de76c9f56b91c8250">m_inputDataSemaphore</a>);
<a name="l00360"></a>00360     <span class="keywordflow">return</span> <a class="code" href="classDriverStationEnhancedIO.html#80d5e4aef338cad2b61b30dec7d13f3c">m_inputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1control__block__t.html#9feaea468e6b09ee7081208555a2c06f">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1input__t.html#f8d6a2e958f230e57388b49dccf610b2">digital</a>;
<a name="l00361"></a>00361 }
<a name="l00362"></a>00362 
<a name="l00369"></a><a class="code" href="classDriverStationEnhancedIO.html#1b17805cb755900f4bc9f34f1444d822">00369</a> <span class="keywordtype">void</span> <a class="code" href="classDriverStationEnhancedIO.html#1b17805cb755900f4bc9f34f1444d822">DriverStationEnhancedIO::SetDigitalOutput</a>(UINT32 channel, <span class="keywordtype">bool</span> value)
<a name="l00370"></a>00370 {
<a name="l00371"></a>00371     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((channel &gt;= 1) &amp;&amp; (channel &lt;= 16));
<a name="l00372"></a>00372     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a>)
<a name="l00373"></a>00373     {
<a name="l00374"></a>00374         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00375"></a>00375         <span class="keywordflow">return</span>;
<a name="l00376"></a>00376     }
<a name="l00377"></a>00377     UINT16 digital;
<a name="l00378"></a>00378     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00379"></a>00379 
<a name="l00380"></a>00380     <span class="keywordflow">if</span> (<a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#805d9dbb9df998bd8a83ce0b764bba2d">digital_oe</a> &amp; (1 &lt;&lt; (channel-1)))
<a name="l00381"></a>00381     {
<a name="l00382"></a>00382         digital = <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#3daedbd125be7b2f0759b44e978d1f6d">digital</a>;
<a name="l00383"></a>00383     
<a name="l00384"></a>00384         digital &amp;= ~(1 &lt;&lt; (channel-1));
<a name="l00385"></a>00385         <span class="keywordflow">if</span> (value) digital |= 1 &lt;&lt; (channel-1);
<a name="l00386"></a>00386     
<a name="l00387"></a>00387         <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#3daedbd125be7b2f0759b44e978d1f6d">digital</a> = digital;
<a name="l00388"></a>00388     }
<a name="l00389"></a>00389     <span class="keywordflow">else</span>
<a name="l00390"></a>00390     {
<a name="l00391"></a>00391         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(LineNotOutput);
<a name="l00392"></a>00392     }
<a name="l00393"></a>00393 }
<a name="l00394"></a>00394 
<a name="l00404"></a><a class="code" href="classDriverStationEnhancedIO.html#8f5de58215d255e84e48723fda4e4c5e">00404</a> <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a9">DriverStationEnhancedIO::tDigitalConfig</a> <a class="code" href="classDriverStationEnhancedIO.html#8f5de58215d255e84e48723fda4e4c5e">DriverStationEnhancedIO::GetDigitalConfig</a>(UINT32 channel)
<a name="l00405"></a>00405 {
<a name="l00406"></a>00406     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((channel &gt;= 1) &amp;&amp; (channel &lt;= 16));
<a name="l00407"></a>00407     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a>)
<a name="l00408"></a>00408     {
<a name="l00409"></a>00409         <a class="code" href="classDriverStationEnhancedIO.html#2d37b5578aeac9292de14c7e964027b3">m_requestEnhancedEnable</a> = <span class="keyword">true</span>;
<a name="l00410"></a>00410         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00411"></a>00411         <span class="keywordflow">return</span> <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a92e407033b59611d08215e436d5e576b2">kUnknown</a>;
<a name="l00412"></a>00412     }
<a name="l00413"></a>00413     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00414"></a>00414     <span class="keywordflow">if</span> ((channel &gt;= 1) &amp;&amp; (channel &lt;= 4))
<a name="l00415"></a>00415     {
<a name="l00416"></a>00416         <span class="keywordflow">if</span> (<a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#b594dcf354b1fa8caa4d4088f4ce80c5">pwm_enable</a> &amp; (1 &lt;&lt; (channel - 1)))
<a name="l00417"></a>00417         {
<a name="l00418"></a>00418             <span class="keywordflow">return</span> <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a9ee1881e72fc58b9f4cc3e946c406c54c">kPWM</a>;
<a name="l00419"></a>00419         }
<a name="l00420"></a>00420     }
<a name="l00421"></a>00421     <span class="keywordflow">if</span> ((channel &gt;= 15) &amp;&amp; (channel &lt;= 16))
<a name="l00422"></a>00422     {
<a name="l00423"></a>00423         <span class="keywordflow">if</span> (<a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#841ef28526dbb287d7d18bd2618250aa">comparator_enable</a> &amp; (1 &lt;&lt; (channel - 15)))
<a name="l00424"></a>00424         {
<a name="l00425"></a>00425             <span class="keywordflow">return</span> <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a9885a19776843481b6cdbabccdbf71f6b">kAnalogComparator</a>;
<a name="l00426"></a>00426         }
<a name="l00427"></a>00427     }
<a name="l00428"></a>00428     <span class="keywordflow">if</span> (<a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#805d9dbb9df998bd8a83ce0b764bba2d">digital_oe</a> &amp; (1 &lt;&lt; (channel - 1)))
<a name="l00429"></a>00429     {
<a name="l00430"></a>00430         <span class="keywordflow">return</span> <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a97f4447287c33f79966c5ed965a07f555">kOutput</a>;
<a name="l00431"></a>00431     }
<a name="l00432"></a>00432     <span class="keywordflow">if</span> (!(<a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#04fdc9dc2b40097061ec594330af0b15">digital_pe</a> &amp; (1 &lt;&lt; (channel - 1))))
<a name="l00433"></a>00433     {
<a name="l00434"></a>00434         <span class="keywordflow">return</span> <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a9692c997bfc8133a5781870843d048597">kInputFloating</a>;
<a name="l00435"></a>00435     }
<a name="l00436"></a>00436     <span class="keywordflow">if</span> (<a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#3daedbd125be7b2f0759b44e978d1f6d">digital</a> &amp; (1 &lt;&lt; (channel - 1)))
<a name="l00437"></a>00437     {
<a name="l00438"></a>00438         <span class="keywordflow">return</span> <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a9ec68888bd23e9c0b7378922ff02f3b97">kInputPullUp</a>;
<a name="l00439"></a>00439     }
<a name="l00440"></a>00440     <span class="keywordflow">else</span>
<a name="l00441"></a>00441     {
<a name="l00442"></a>00442         <span class="keywordflow">return</span> <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a96a53701106b3fb9bfa10cdad1d200258">kInputPullDown</a>;
<a name="l00443"></a>00443     }
<a name="l00444"></a>00444 }
<a name="l00445"></a>00445 
<a name="l00469"></a><a class="code" href="classDriverStationEnhancedIO.html#fad555dfa62bf621e92edda0b36613d0">00469</a> <span class="keywordtype">void</span> <a class="code" href="classDriverStationEnhancedIO.html#fad555dfa62bf621e92edda0b36613d0">DriverStationEnhancedIO::SetDigitalConfig</a>(UINT32 channel, <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a9">tDigitalConfig</a> config)
<a name="l00470"></a>00470 {
<a name="l00471"></a>00471     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((channel &gt;= 1) &amp;&amp; (channel &lt;= 16));
<a name="l00472"></a>00472     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> (config != <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a9ee1881e72fc58b9f4cc3e946c406c54c">kPWM</a> || ((channel &gt;= 1) &amp;&amp; (channel &lt;= 4)));
<a name="l00473"></a>00473     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> (config != <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a9885a19776843481b6cdbabccdbf71f6b">kAnalogComparator</a> || ((channel &gt;= 15) &amp;&amp; (channel &lt;= 16)));
<a name="l00474"></a>00474 
<a name="l00475"></a>00475     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00476"></a>00476     <a class="code" href="classDriverStationEnhancedIO.html#efd96ae34865efadacdf46ee4223659a">m_configChanged</a> = <span class="keyword">true</span>;
<a name="l00477"></a>00477 
<a name="l00478"></a>00478     <span class="keywordflow">if</span> ((channel &gt;= 1) &amp;&amp; (channel &lt;= 4))
<a name="l00479"></a>00479     {
<a name="l00480"></a>00480         <span class="keywordflow">if</span> (config == <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a9ee1881e72fc58b9f4cc3e946c406c54c">kPWM</a>)
<a name="l00481"></a>00481         {
<a name="l00482"></a>00482             <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#b594dcf354b1fa8caa4d4088f4ce80c5">pwm_enable</a> |= 1 &lt;&lt; (channel - 1);
<a name="l00483"></a>00483             <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#3daedbd125be7b2f0759b44e978d1f6d">digital</a> &amp;= ~(1 &lt;&lt; (channel - 1));
<a name="l00484"></a>00484             <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#805d9dbb9df998bd8a83ce0b764bba2d">digital_oe</a> |= 1 &lt;&lt; (channel - 1);
<a name="l00485"></a>00485             <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#04fdc9dc2b40097061ec594330af0b15">digital_pe</a> &amp;= ~(1 &lt;&lt; (channel - 1));
<a name="l00486"></a>00486             <span class="keywordflow">return</span>;
<a name="l00487"></a>00487         }
<a name="l00488"></a>00488         <span class="keywordflow">else</span>
<a name="l00489"></a>00489         {
<a name="l00490"></a>00490             <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#b594dcf354b1fa8caa4d4088f4ce80c5">pwm_enable</a> &amp;= ~(1 &lt;&lt; (channel - 1));
<a name="l00491"></a>00491         }
<a name="l00492"></a>00492     }
<a name="l00493"></a>00493     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((channel &gt;= 15) &amp;&amp; (channel &lt;= 16))
<a name="l00494"></a>00494     {
<a name="l00495"></a>00495         <span class="keywordflow">if</span> (config == <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a9885a19776843481b6cdbabccdbf71f6b">kAnalogComparator</a>)
<a name="l00496"></a>00496         {
<a name="l00497"></a>00497             <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#841ef28526dbb287d7d18bd2618250aa">comparator_enable</a> |= 1 &lt;&lt; (channel - 15);
<a name="l00498"></a>00498             <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#3daedbd125be7b2f0759b44e978d1f6d">digital</a> &amp;= ~(1 &lt;&lt; (channel - 1));
<a name="l00499"></a>00499             <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#805d9dbb9df998bd8a83ce0b764bba2d">digital_oe</a> &amp;= ~(1 &lt;&lt; (channel - 1));
<a name="l00500"></a>00500             <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#04fdc9dc2b40097061ec594330af0b15">digital_pe</a> &amp;= ~(1 &lt;&lt; (channel - 1));
<a name="l00501"></a>00501             <span class="keywordflow">return</span>;
<a name="l00502"></a>00502         }
<a name="l00503"></a>00503         <span class="keywordflow">else</span>
<a name="l00504"></a>00504         {
<a name="l00505"></a>00505             <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#841ef28526dbb287d7d18bd2618250aa">comparator_enable</a> &amp;= ~(1 &lt;&lt; (channel - 15));
<a name="l00506"></a>00506         }
<a name="l00507"></a>00507     }
<a name="l00508"></a>00508     <span class="keywordflow">if</span> (config == <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a9692c997bfc8133a5781870843d048597">kInputFloating</a>)
<a name="l00509"></a>00509     {
<a name="l00510"></a>00510         <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#3daedbd125be7b2f0759b44e978d1f6d">digital</a> &amp;= ~(1 &lt;&lt; (channel - 1));
<a name="l00511"></a>00511         <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#805d9dbb9df998bd8a83ce0b764bba2d">digital_oe</a> &amp;= ~(1 &lt;&lt; (channel - 1));
<a name="l00512"></a>00512         <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#04fdc9dc2b40097061ec594330af0b15">digital_pe</a> &amp;= ~(1 &lt;&lt; (channel - 1));
<a name="l00513"></a>00513     }
<a name="l00514"></a>00514     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (config == <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a9ec68888bd23e9c0b7378922ff02f3b97">kInputPullUp</a>)
<a name="l00515"></a>00515     {
<a name="l00516"></a>00516         <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#3daedbd125be7b2f0759b44e978d1f6d">digital</a> |= 1 &lt;&lt; (channel - 1);
<a name="l00517"></a>00517         <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#805d9dbb9df998bd8a83ce0b764bba2d">digital_oe</a> &amp;= ~(1 &lt;&lt; (channel - 1));
<a name="l00518"></a>00518         <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#04fdc9dc2b40097061ec594330af0b15">digital_pe</a> |= 1 &lt;&lt; (channel - 1);
<a name="l00519"></a>00519     }
<a name="l00520"></a>00520     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (config == <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a96a53701106b3fb9bfa10cdad1d200258">kInputPullDown</a>)
<a name="l00521"></a>00521     {
<a name="l00522"></a>00522         <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#3daedbd125be7b2f0759b44e978d1f6d">digital</a> &amp;= ~(1 &lt;&lt; (channel - 1));
<a name="l00523"></a>00523         <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#805d9dbb9df998bd8a83ce0b764bba2d">digital_oe</a> &amp;= ~(1 &lt;&lt; (channel - 1));
<a name="l00524"></a>00524         <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#04fdc9dc2b40097061ec594330af0b15">digital_pe</a> |= 1 &lt;&lt; (channel - 1);
<a name="l00525"></a>00525     }
<a name="l00526"></a>00526     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (config == <a class="code" href="classDriverStationEnhancedIO.html#91b58d6e1568a7b5650d7833a3ad01a97f4447287c33f79966c5ed965a07f555">kOutput</a>)
<a name="l00527"></a>00527     {
<a name="l00528"></a>00528         <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#805d9dbb9df998bd8a83ce0b764bba2d">digital_oe</a> |= 1 &lt;&lt; (channel - 1);
<a name="l00529"></a>00529         <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#04fdc9dc2b40097061ec594330af0b15">digital_pe</a> &amp;= ~(1 &lt;&lt; (channel - 1));
<a name="l00530"></a>00530     }
<a name="l00531"></a>00531     <span class="keywordflow">else</span>
<a name="l00532"></a>00532     {
<a name="l00533"></a>00533         <span class="comment">// Something went wrong.</span>
<a name="l00534"></a>00534     }
<a name="l00535"></a>00535 }
<a name="l00536"></a>00536 
<a name="l00546"></a><a class="code" href="classDriverStationEnhancedIO.html#4cd8909d9a276724787ea5ec0f954c66">00546</a> <span class="keywordtype">double</span> <a class="code" href="classDriverStationEnhancedIO.html#4cd8909d9a276724787ea5ec0f954c66">DriverStationEnhancedIO::GetPWMPeriod</a>(<a class="code" href="classDriverStationEnhancedIO.html#fb0d5c951aba273b382cf1085afdcfbd">tPWMPeriodChannels</a> <a class="code" href="AnalogChannel_8cpp.html#14d904b79be0754f7b01b2b26bc368b7">channels</a>)
<a name="l00547"></a>00547 {
<a name="l00548"></a>00548     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((channels &gt;= <a class="code" href="classDriverStationEnhancedIO.html#fb0d5c951aba273b382cf1085afdcfbdf0e91671ede3ce3be2f1341026a89717">kPWMChannels1and2</a>) &amp;&amp; (channels &lt;= <a class="code" href="classDriverStationEnhancedIO.html#fb0d5c951aba273b382cf1085afdcfbdcbe20f3162e940e9c218c17c9ba673e4">kPWMChannels3and4</a>));
<a name="l00549"></a>00549     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a>)
<a name="l00550"></a>00550     {
<a name="l00551"></a>00551         <a class="code" href="classDriverStationEnhancedIO.html#2d37b5578aeac9292de14c7e964027b3">m_requestEnhancedEnable</a> = <span class="keyword">true</span>;
<a name="l00552"></a>00552         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00553"></a>00553         <span class="keywordflow">return</span> 0;
<a name="l00554"></a>00554     }
<a name="l00555"></a>00555     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00556"></a>00556     <span class="keywordflow">return</span> <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#c448838a8a93fe7c0fb0ad6feece41eb">pwm_period</a>[channels] / 24000000.0;
<a name="l00557"></a>00557 }
<a name="l00558"></a>00558 
<a name="l00569"></a><a class="code" href="classDriverStationEnhancedIO.html#6f1c7196f6cbcce00a928d7380b9d46f">00569</a> <span class="keywordtype">void</span> <a class="code" href="classDriverStationEnhancedIO.html#6f1c7196f6cbcce00a928d7380b9d46f">DriverStationEnhancedIO::SetPWMPeriod</a>(<a class="code" href="classDriverStationEnhancedIO.html#fb0d5c951aba273b382cf1085afdcfbd">tPWMPeriodChannels</a> <a class="code" href="AnalogChannel_8cpp.html#14d904b79be0754f7b01b2b26bc368b7">channels</a>, <span class="keywordtype">double</span> period)
<a name="l00570"></a>00570 {
<a name="l00571"></a>00571     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((channels &gt;= <a class="code" href="classDriverStationEnhancedIO.html#fb0d5c951aba273b382cf1085afdcfbdf0e91671ede3ce3be2f1341026a89717">kPWMChannels1and2</a>) &amp;&amp; (channels &lt;= <a class="code" href="classDriverStationEnhancedIO.html#fb0d5c951aba273b382cf1085afdcfbdcbe20f3162e940e9c218c17c9ba673e4">kPWMChannels3and4</a>));
<a name="l00572"></a>00572     <span class="comment">// Convert to ticks based on the IO board's 24MHz clock</span>
<a name="l00573"></a>00573     <span class="keywordtype">double</span> ticks = period * 24000000.0;
<a name="l00574"></a>00574     <span class="comment">// Limit the range of the ticks... warn if too big.</span>
<a name="l00575"></a>00575     <span class="keywordflow">if</span> (ticks &gt; 65534.0) 
<a name="l00576"></a>00576     {
<a name="l00577"></a>00577         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOPWMPeriodOutOfRange);
<a name="l00578"></a>00578         ticks = 65534.0;
<a name="l00579"></a>00579     }
<a name="l00580"></a>00580     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ticks &lt; 0.0) ticks = 0.0;
<a name="l00581"></a>00581     <span class="comment">// Preserve the duty cycles.</span>
<a name="l00582"></a>00582     <span class="keywordtype">double</span> dutyCycles[2];
<a name="l00583"></a>00583     dutyCycles[0] = <a class="code" href="classDriverStationEnhancedIO.html#e98d30680867528616fee53ff90b6921">GetPWMOutput</a>((channels &lt;&lt; 1) + 1);
<a name="l00584"></a>00584     dutyCycles[1] = <a class="code" href="classDriverStationEnhancedIO.html#e98d30680867528616fee53ff90b6921">GetPWMOutput</a>((channels &lt;&lt; 1) + 2);
<a name="l00585"></a>00585     {
<a name="l00586"></a>00586         <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00587"></a>00587         <span class="comment">// Update the period</span>
<a name="l00588"></a>00588         <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#c448838a8a93fe7c0fb0ad6feece41eb">pwm_period</a>[channels] = (UINT16)ticks;
<a name="l00589"></a>00589         <a class="code" href="classDriverStationEnhancedIO.html#efd96ae34865efadacdf46ee4223659a">m_configChanged</a> = <span class="keyword">true</span>;
<a name="l00590"></a>00590     }
<a name="l00591"></a>00591     <span class="comment">// Restore the duty cycles</span>
<a name="l00592"></a>00592     <a class="code" href="classDriverStationEnhancedIO.html#a343765022e453e9be07719b3e247eb5">SetPWMOutput</a>((channels &lt;&lt; 1) + 1, dutyCycles[0]);
<a name="l00593"></a>00593     <a class="code" href="classDriverStationEnhancedIO.html#a343765022e453e9be07719b3e247eb5">SetPWMOutput</a>((channels &lt;&lt; 1) + 2, dutyCycles[1]);
<a name="l00594"></a>00594 }
<a name="l00595"></a>00595 
<a name="l00602"></a><a class="code" href="classDriverStationEnhancedIO.html#ee619374b9c5f1135682bda584ec146c">00602</a> <span class="keywordtype">bool</span> <a class="code" href="classDriverStationEnhancedIO.html#ee619374b9c5f1135682bda584ec146c">DriverStationEnhancedIO::GetFixedDigitalOutput</a>(UINT32 channel)
<a name="l00603"></a>00603 {
<a name="l00604"></a>00604     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((channel &gt;= 1) &amp;&amp; (channel &lt;= 2));
<a name="l00605"></a>00605     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a>)
<a name="l00606"></a>00606     {
<a name="l00607"></a>00607         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00608"></a>00608         <span class="keywordflow">return</span> 0;
<a name="l00609"></a>00609     }
<a name="l00610"></a>00610     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00611"></a>00611     <span class="keywordflow">return</span> ((<a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#754d9741913938f490e0e331f0126dd4">fixed_digital_out</a> &gt;&gt; (channel-1)) &amp; 1) != 0;
<a name="l00612"></a>00612 }
<a name="l00613"></a>00613 
<a name="l00628"></a><a class="code" href="classDriverStationEnhancedIO.html#97ef0ba03c428cb102d7a8687e482f17">00628</a> <span class="keywordtype">void</span> <a class="code" href="classDriverStationEnhancedIO.html#97ef0ba03c428cb102d7a8687e482f17">DriverStationEnhancedIO::SetFixedDigitalOutput</a>(UINT32 channel, <span class="keywordtype">bool</span> value)
<a name="l00629"></a>00629 {
<a name="l00630"></a>00630     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((channel &gt;= 1) &amp;&amp; (channel &lt;= 2));
<a name="l00631"></a>00631     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a>)
<a name="l00632"></a>00632     {
<a name="l00633"></a>00633         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00634"></a>00634         <span class="keywordflow">return</span>;
<a name="l00635"></a>00635     }
<a name="l00636"></a>00636     UINT8 digital;
<a name="l00637"></a>00637     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00638"></a>00638     digital = <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#754d9741913938f490e0e331f0126dd4">fixed_digital_out</a>;
<a name="l00639"></a>00639 
<a name="l00640"></a>00640     digital &amp;= ~(1 &lt;&lt; (channel-1));
<a name="l00641"></a>00641     <span class="keywordflow">if</span> (value) digital |= 1 &lt;&lt; (channel-1);
<a name="l00642"></a>00642 
<a name="l00643"></a>00643     <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#754d9741913938f490e0e331f0126dd4">fixed_digital_out</a> = digital;
<a name="l00644"></a>00644 }
<a name="l00645"></a>00645 
<a name="l00660"></a><a class="code" href="classDriverStationEnhancedIO.html#32f6f8d6b4f5969ea4f85373d5e0f1b7">00660</a> INT16 <a class="code" href="classDriverStationEnhancedIO.html#32f6f8d6b4f5969ea4f85373d5e0f1b7">DriverStationEnhancedIO::GetEncoder</a>(UINT32 encoderNumber)
<a name="l00661"></a>00661 {
<a name="l00662"></a>00662     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((encoderNumber &gt;= 1) &amp;&amp; (encoderNumber &lt;= 2));
<a name="l00663"></a>00663     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#8a569913026ca64d61da7caf6c2c4777">m_inputValid</a>)
<a name="l00664"></a>00664     {
<a name="l00665"></a>00665         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00666"></a>00666         <span class="keywordflow">return</span> 0;
<a name="l00667"></a>00667     }
<a name="l00668"></a>00668     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#712c6036a57b705de76c9f56b91c8250">m_inputDataSemaphore</a>);
<a name="l00669"></a>00669     <span class="keywordflow">return</span> <a class="code" href="classDriverStationEnhancedIO.html#80d5e4aef338cad2b61b30dec7d13f3c">m_inputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1control__block__t.html#9feaea468e6b09ee7081208555a2c06f">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1input__t.html#12ecbadd1db889b7a6a1073a6f830f63">quad</a>[encoderNumber - 1] - <a class="code" href="classDriverStationEnhancedIO.html#5c3be8a8e3bbd239fff2948cb8f225ef">m_encoderOffsets</a>[encoderNumber - 1];
<a name="l00670"></a>00670 }
<a name="l00671"></a>00671 
<a name="l00680"></a><a class="code" href="classDriverStationEnhancedIO.html#22ca90b78c4412be888953c77f6280e6">00680</a> <span class="keywordtype">void</span> <a class="code" href="classDriverStationEnhancedIO.html#22ca90b78c4412be888953c77f6280e6">DriverStationEnhancedIO::ResetEncoder</a>(UINT32 encoderNumber)
<a name="l00681"></a>00681 {
<a name="l00682"></a>00682     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((encoderNumber &gt;= 1) &amp;&amp; (encoderNumber &lt;= 2));
<a name="l00683"></a>00683     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#8a569913026ca64d61da7caf6c2c4777">m_inputValid</a>)
<a name="l00684"></a>00684     {
<a name="l00685"></a>00685         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00686"></a>00686         <span class="keywordflow">return</span>;
<a name="l00687"></a>00687     }
<a name="l00688"></a>00688     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#712c6036a57b705de76c9f56b91c8250">m_inputDataSemaphore</a>);
<a name="l00689"></a>00689     <a class="code" href="classDriverStationEnhancedIO.html#5c3be8a8e3bbd239fff2948cb8f225ef">m_encoderOffsets</a>[encoderNumber - 1] = <a class="code" href="classDriverStationEnhancedIO.html#80d5e4aef338cad2b61b30dec7d13f3c">m_inputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1control__block__t.html#9feaea468e6b09ee7081208555a2c06f">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1input__t.html#12ecbadd1db889b7a6a1073a6f830f63">quad</a>[encoderNumber - 1];
<a name="l00690"></a>00690 }
<a name="l00691"></a>00691 
<a name="l00701"></a><a class="code" href="classDriverStationEnhancedIO.html#6e88a899d3cdb6e4750d37204e269f9c">00701</a> <span class="keywordtype">bool</span> <a class="code" href="classDriverStationEnhancedIO.html#6e88a899d3cdb6e4750d37204e269f9c">DriverStationEnhancedIO::GetEncoderIndexEnable</a>(UINT32 encoderNumber)
<a name="l00702"></a>00702 {
<a name="l00703"></a>00703     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((encoderNumber &gt;= 1) &amp;&amp; (encoderNumber &lt;= 2));
<a name="l00704"></a>00704     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a>)
<a name="l00705"></a>00705     {
<a name="l00706"></a>00706         <a class="code" href="classDriverStationEnhancedIO.html#2d37b5578aeac9292de14c7e964027b3">m_requestEnhancedEnable</a> = <span class="keyword">true</span>;
<a name="l00707"></a>00707         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00708"></a>00708         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00709"></a>00709     }
<a name="l00710"></a>00710     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00711"></a>00711     <span class="keywordflow">return</span> ((<a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#afd75b693ea19ef97a8e933b79145ae9">quad_index_enable</a> &gt;&gt; (encoderNumber - 1)) &amp; 1) != 0;
<a name="l00712"></a>00712 }
<a name="l00713"></a>00713 
<a name="l00727"></a><a class="code" href="classDriverStationEnhancedIO.html#01d34032c4d8c282359c62c3b44f8a85">00727</a> <span class="keywordtype">void</span> <a class="code" href="classDriverStationEnhancedIO.html#01d34032c4d8c282359c62c3b44f8a85">DriverStationEnhancedIO::SetEncoderIndexEnable</a>(UINT32 encoderNumber, <span class="keywordtype">bool</span> enable)
<a name="l00728"></a>00728 {
<a name="l00729"></a>00729     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((encoderNumber &gt;= 1) &amp;&amp; (encoderNumber &lt;= 2));
<a name="l00730"></a>00730     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00731"></a>00731     <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#afd75b693ea19ef97a8e933b79145ae9">quad_index_enable</a> &amp;= ~(1 &lt;&lt; (encoderNumber - 1));
<a name="l00732"></a>00732     <span class="keywordflow">if</span> (enable) <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#afd75b693ea19ef97a8e933b79145ae9">quad_index_enable</a> |= 1 &lt;&lt; (encoderNumber - 1);
<a name="l00733"></a>00733     <a class="code" href="classDriverStationEnhancedIO.html#efd96ae34865efadacdf46ee4223659a">m_configChanged</a> = <span class="keyword">true</span>;
<a name="l00734"></a>00734 }
<a name="l00735"></a>00735 
<a name="l00741"></a><a class="code" href="classDriverStationEnhancedIO.html#873a93d533fc36508b0315796319fd90">00741</a> <span class="keywordtype">double</span> <a class="code" href="classDriverStationEnhancedIO.html#873a93d533fc36508b0315796319fd90">DriverStationEnhancedIO::GetTouchSlider</a>()
<a name="l00742"></a>00742 {
<a name="l00743"></a>00743     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#8a569913026ca64d61da7caf6c2c4777">m_inputValid</a>)
<a name="l00744"></a>00744     {
<a name="l00745"></a>00745         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00746"></a>00746         <span class="keywordflow">return</span> 0;
<a name="l00747"></a>00747     }
<a name="l00748"></a>00748     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#712c6036a57b705de76c9f56b91c8250">m_inputDataSemaphore</a>);
<a name="l00749"></a>00749     UINT8 value = <a class="code" href="classDriverStationEnhancedIO.html#80d5e4aef338cad2b61b30dec7d13f3c">m_inputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1control__block__t.html#9feaea468e6b09ee7081208555a2c06f">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1input__t.html#9754892b9217277996179967f31c1840">capsense_slider</a>;
<a name="l00750"></a>00750     <span class="keywordflow">return</span> value == 255 ? -1.0 : value / 254.0;
<a name="l00751"></a>00751 }
<a name="l00752"></a>00752 
<a name="l00759"></a><a class="code" href="classDriverStationEnhancedIO.html#e98d30680867528616fee53ff90b6921">00759</a> <span class="keywordtype">double</span> <a class="code" href="classDriverStationEnhancedIO.html#e98d30680867528616fee53ff90b6921">DriverStationEnhancedIO::GetPWMOutput</a>(UINT32 channel)
<a name="l00760"></a>00760 {
<a name="l00761"></a>00761     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((channel &gt;= 1) &amp;&amp; (channel &lt;= 4));
<a name="l00762"></a>00762     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a>)
<a name="l00763"></a>00763     {
<a name="l00764"></a>00764         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00765"></a>00765         <span class="keywordflow">return</span> 0;
<a name="l00766"></a>00766     }
<a name="l00767"></a>00767     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00768"></a>00768     <span class="keywordflow">return</span> (<span class="keywordtype">double</span>)<a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#eb1a87604ea8d0106ba749b2b871b906">pwm_compare</a>[channel - 1] / (double)<a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#c448838a8a93fe7c0fb0ad6feece41eb">pwm_period</a>[(channel - 1) &gt;&gt; 1];
<a name="l00769"></a>00769 }
<a name="l00770"></a>00770 
<a name="l00780"></a><a class="code" href="classDriverStationEnhancedIO.html#a343765022e453e9be07719b3e247eb5">00780</a> <span class="keywordtype">void</span> <a class="code" href="classDriverStationEnhancedIO.html#a343765022e453e9be07719b3e247eb5">DriverStationEnhancedIO::SetPWMOutput</a>(UINT32 channel, <span class="keywordtype">double</span> value)
<a name="l00781"></a>00781 {
<a name="l00782"></a>00782     <a class="code" href="Utility_8h.html#34b13bd29631329c597428636401bbba">wpi_assert</a> ((channel &gt;= 1) &amp;&amp; (channel &lt;= 4));
<a name="l00783"></a>00783     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#d0bb0f558d282c3f3b68f181dbb4265d">m_outputValid</a>)
<a name="l00784"></a>00784     {
<a name="l00785"></a>00785         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00786"></a>00786         <span class="keywordflow">return</span>;
<a name="l00787"></a>00787     }
<a name="l00788"></a>00788     <span class="keywordflow">if</span> (value &gt; 1.0) value = 1.0;
<a name="l00789"></a>00789     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value &lt; 0.0) value = 0.0;
<a name="l00790"></a>00790     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#1d8207677225111407580c7f136784fa">m_outputDataSemaphore</a>);
<a name="l00791"></a>00791     <a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#eb1a87604ea8d0106ba749b2b871b906">pwm_compare</a>[channel - 1] = (UINT16)(value * (<span class="keywordtype">double</span>)<a class="code" href="classDriverStationEnhancedIO.html#751900551ce0556c9d4ac4c2ca2b02be">m_outputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1status__block__t.html#cb7a87cf5f06cad6b7242351299a08ed">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1output__t.html#c448838a8a93fe7c0fb0ad6feece41eb">pwm_period</a>[(channel - 1) &gt;&gt; 1]);
<a name="l00792"></a>00792 }
<a name="l00793"></a>00793 
<a name="l00803"></a><a class="code" href="classDriverStationEnhancedIO.html#f47e837e7e54536ea38e141a38192c9f">00803</a> UINT8 <a class="code" href="classDriverStationEnhancedIO.html#f47e837e7e54536ea38e141a38192c9f">DriverStationEnhancedIO::GetFirmwareVersion</a>()
<a name="l00804"></a>00804 {
<a name="l00805"></a>00805     <span class="keywordflow">if</span> (!<a class="code" href="classDriverStationEnhancedIO.html#8a569913026ca64d61da7caf6c2c4777">m_inputValid</a>)
<a name="l00806"></a>00806     {
<a name="l00807"></a>00807         <a class="code" href="classDriverStationEnhancedIO.html#2d37b5578aeac9292de14c7e964027b3">m_requestEnhancedEnable</a> = <span class="keyword">true</span>;
<a name="l00808"></a>00808         <a class="code" href="Utility_8h.html#3290d292094ffd3901e9b00db8049f0a">wpi_fatal</a>(EnhancedIOMissing);
<a name="l00809"></a>00809         <span class="keywordflow">return</span> 0;
<a name="l00810"></a>00810     }
<a name="l00811"></a>00811     <a class="code" href="classSynchronized.html">Synchronized</a> sync(<a class="code" href="classDriverStationEnhancedIO.html#712c6036a57b705de76c9f56b91c8250">m_inputDataSemaphore</a>);
<a name="l00812"></a>00812     <span class="keywordflow">return</span> <a class="code" href="classDriverStationEnhancedIO.html#80d5e4aef338cad2b61b30dec7d13f3c">m_inputData</a>.<a class="code" href="structDriverStationEnhancedIO_1_1control__block__t.html#9feaea468e6b09ee7081208555a2c06f">data</a>.<a class="code" href="structDriverStationEnhancedIO_1_1input__t.html#2af7c3799433da450e73921d8bc1d78b">fw_version</a>;
<a name="l00813"></a>00813 }
<a name="l00814"></a>00814 
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Feb 9 11:20:44 2011 for WPILIB by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
